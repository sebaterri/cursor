{
  "files": [
    {
      "path": "backend/package.json",
      "content": "{\n  \"name\": \"soccer-klout-backend\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Klout-style soccer player influence scoring API\",\n  \"main\": \"dist/index.js\",\n  \"scripts\": {\n    \"build\": \"tsc\",\n    \"start\": \"node dist/index.js\",\n    \"dev\": \"ts-node src/index.ts\",\n    \"test\": \"jest\"\n  },\n  \"keywords\": [],\n  \"author\": \"\",\n  \"license\": \"MIT\",\n  \"dependencies\": {\n    \"axios\": \"^1.6.0\",\n    \"express\": \"^4.18.2\",\n    \"cors\": \"^2.8.5\",\n    \"dotenv\": \"^16.3.1\",\n    \"node-cache\": \"^5.1.2\"\n  },\n  \"devDependencies\": {\n    \"@types/node\": \"^20.0.0\",\n    \"@types/express\": \"^4.17.17\",\n    \"@types/jest\": \"^29.5.0\",\n    \"typescript\": \"^5.0.0\",\n    \"ts-node\": \"^10.9.1\",\n    \"@types/node-cache\": \"^4.1.5\"\n  }\n}\n",
      "previousContent": null
    },
    {
      "path": "backend/tsconfig.json",
      "content": "{\n  \"compilerOptions\": {\n    \"target\": \"ES2020\",\n    \"module\": \"commonjs\",\n    \"lib\": [\"ES2020\"],\n    \"outDir\": \"./dist\",\n    \"rootDir\": \"./src\",\n    \"strict\": true,\n    \"esModuleInterop\": true,\n    \"skipLibCheck\": true,\n    \"forceConsistentCasingInFileNames\": true,\n    \"resolveJsonModule\": true,\n    \"declaration\": true,\n    \"declarationMap\": true,\n    \"sourceMap\": true\n  },\n  \"include\": [\"src/**/*\"],\n  \"exclude\": [\"node_modules\", \"dist\"]\n}\n",
      "previousContent": null
    },
    {
      "path": "backend/src/types.ts",
      "content": "/**\n * Core TypeScript types for Soccer Klout API\n */\n\nexport interface PlayerStats {\n  goals: number;\n  assists: number;\n  appearances: number;\n  socialMentions: number;\n}\n\nexport interface InfluenceWeights {\n  goals: number;\n  assists: number;\n  appearances: number;\n  socialMentions: number;\n}\n\nexport interface PlayerProfile {\n  id: string;\n  name: string;\n  club: string;\n  position: string;\n  nationality: string;\n  age: number;\n  photo?: string;\n  shirtNumber?: number;\n}\n\nexport interface PlayerWithStats {\n  profile: PlayerProfile;\n  stats: PlayerStats;\n}\n\nexport interface InfluenceScore {\n  playerId: string;\n  playerName: string;\n  influence: number;\n  normalizedInfluence: number; // 0-100 scale\n  breakdown: {\n    goalsScore: number;\n    assistsScore: number;\n    appearancesScore: number;\n    socialScore: number;\n  };\n  rank?: number;\n}\n\nexport interface LeaderboardEntry {\n  rank: number;\n  player: PlayerProfile;\n  influence: InfluenceScore;\n}\n\nexport interface PlayerComparison {\n  players: (PlayerWithStats & { influenceScore: InfluenceScore })[];\n  maxInfluence: number;\n}\n\nexport interface FootballDataPlayer {\n  id: number;\n  name: string;\n  position: string;\n  dateOfBirth: string;\n  nationality: string;\n  shirtNumber: number | null;\n  lastUpdated: string;\n}\n\nexport interface FootballDataTeam {\n  id: number;\n  name: string;\n  shortName: string;\n  tla: string;\n  crest: string;\n  address: string;\n  website: string;\n  email: string;\n  phone: string;\n  founded: number;\n  clubColors: string;\n  venue: string;\n  lastUpdated: string;\n}\n\nexport interface FootballDataPlayerStats {\n  player: FootballDataPlayer;\n  team: FootballDataTeam;\n  statistics: {\n    appearances: number;\n    lineups: number;\n    minutes: number;\n    goals: number;\n    assists: number | null;\n    offsides: number | null;\n    redCards: number;\n    yellowCards: number;\n    tackling: {\n      total: number | null;\n      tackles: number | null;\n      blocks: number | null;\n    };\n    duels: {\n      total: number | null;\n      won: number | null;\n    };\n    defensive: {\n      interceptions: number | null;\n      clearances: number | null;\n      ownGoals: number | null;\n    };\n    passing: {\n      total: number | null;\n      accuracy: number | null;\n    };\n    shots: {\n      total: number | null;\n      on: number | null;\n    };\n    dribbles: {\n      attempts: number | null;\n      success: number | null;\n    };\n  };\n}\n\nexport interface SearchResponse {\n  results: (PlayerProfile & { matchScore: number })[];\n  totalCount: number;\n}\n\nexport interface ApiError {\n  code: string;\n  message: string;\n  statusCode: number;\n}\n\nexport interface CacheEntry<T> {\n  data: T;\n  timestamp: number;\n  ttl: number;\n}\n",
      "previousContent": null
    },
    {
      "path": "backend/src/services/cache.ts",
      "content": "import NodeCache from 'node-cache';\n\n/**\n * Cache service for storing API responses\n * TTL: 10 minutes for player data, 1 hour for searches\n */\nclass CacheService {\n  private cache: NodeCache;\n\n  constructor() {\n    // stdTTL: standard TTL in seconds, checkperiod: auto-delete check interval\n    this.cache = new NodeCache({ stdTTL: 600, checkperiod: 120 });\n  }\n\n  /**\n   * Get value from cache\n   */\n  get<T>(key: string): T | undefined {\n    return this.cache.get<T>(key);\n  }\n\n  /**\n   * Set value in cache\n   */\n  set<T>(key: string, value: T, ttl?: number): boolean {\n    return this.cache.set<T>(key, value, ttl || 600);\n  }\n\n  /**\n   * Delete specific key\n   */\n  del(key: string): number {\n    return this.cache.del(key);\n  }\n\n  /**\n   * Clear all cache\n   */\n  flush(): void {\n    this.cache.flushAll();\n  }\n\n  /**\n   * Get cache statistics\n   */\n  getStats() {\n    return this.cache.getStats();\n  }\n\n  /**\n   * Check if key exists\n   */\n  has(key: string): boolean {\n    return this.cache.has(key);\n  }\n}\n\nexport const cacheService = new CacheService();\n",
      "previousContent": null
    },
    {
      "path": "backend/src/services/footballDataApi.ts",
      "content": "import axios, { AxiosError } from 'axios';\nimport { cacheService } from './cache';\nimport {\n  PlayerProfile,\n  FootballDataPlayer,\n  FootballDataPlayerStats,\n  FootballDataTeam,\n  PlayerStats,\n  ApiError,\n  SearchResponse,\n} from '../types';\n\nconst FOOTBALL_DATA_API = 'https://api.football-data.org/v4';\nconst API_KEY = process.env.FOOTBALL_DATA_API_KEY || 'demo'; // Demo key has rate limits\nconst CACHE_TTL = {\n  PLAYER_DATA: 600, // 10 minutes\n  SEARCH: 3600, // 1 hour\n  STATS: 1800, // 30 minutes\n};\n\n/**\n * Mock data for demo purposes when API key is 'demo'\n */\nconst MOCK_PLAYERS: Record<string, PlayerProfile & { stats: PlayerStats }> = {\n  messi: {\n    id: '1',\n    name: 'Lionel Messi',\n    club: 'Inter Miami CF',\n    position: 'Forward',\n    nationality: 'Argentina',\n    age: 37,\n    photo: 'https://crests.football-data.org/1.svg',\n    shirtNumber: 10,\n    stats: {\n      goals: 807,\n      assists: 318,\n      appearances: 1000,\n      socialMentions: 5000000,\n    },\n  },\n  ronaldo: {\n    id: '2',\n    name: 'Cristiano Ronaldo',\n    club: 'Al-Nassr',\n    position: 'Forward',\n    nationality: 'Portugal',\n    age: 39,\n    photo: 'https://crests.football-data.org/2.svg',\n    shirtNumber: 7,\n    stats: {\n      goals: 890,\n      assists: 270,\n      appearances: 1150,\n      socialMentions: 6000000,\n    },\n  },\n  haaland: {\n    id: '3',\n    name: 'Erling Haaland',\n    club: 'Manchester City',\n    position: 'Forward',\n    nationality: 'Norway',\n    age: 24,\n    photo: 'https://crests.football-data.org/3.svg',\n    shirtNumber: 9,\n    stats: {\n      goals: 186,\n      assists: 45,\n      appearances: 278,\n      socialMentions: 2500000,\n    },\n  },\n  mbapp√©: {\n    id: '4',\n    name: 'Kylian Mbapp√©',\n    club: 'Paris Saint-Germain',\n    position: 'Forward',\n    nationality: 'France',\n    age: 25,\n    photo: 'https://crests.football-data.org/4.svg',\n    shirtNumber: 7,\n    stats: {\n      goals: 312,\n      assists: 95,\n      appearances: 456,\n      socialMentions: 3500000,\n    },\n  },\n  neymar: {\n    id: '5',\n    name: 'Neymar Jr',\n    club: 'Al-Hilal',\n    position: 'Forward',\n    nationality: 'Brazil',\n    age: 32,\n    photo: 'https://crests.football-data.org/5.svg',\n    shirtNumber: 11,\n    stats: {\n      goals: 140,\n      assists: 102,\n      appearances: 312,\n      socialMentions: 4000000,\n    },\n  },\n};\n\nclass FootballDataService {\n  /**\n   * Search for players by name\n   */\n  async searchPlayers(name: string): Promise<SearchResponse> {\n    const cacheKey = `search:${name.toLowerCase()}`;\n\n    // Check cache first\n    const cached = cacheService.get<SearchResponse>(cacheKey);\n    if (cached) {\n      return cached;\n    }\n\n    try {\n      // Use mock data for demo\n      if (API_KEY === 'demo') {\n        return this.searchMockPlayers(name);\n      }\n\n      // Real API implementation would go here\n      // For now, we'll use mock data\n      const response = this.searchMockPlayers(name);\n      cacheService.set(cacheKey, response, CACHE_TTL.SEARCH);\n      return response;\n    } catch (error) {\n      console.error('Player search failed:', error);\n      throw this.handleApiError(error);\n    }\n  }\n\n  /**\n   * Get detailed player stats\n   */\n  async getPlayerStats(playerId: string): Promise<{ profile: PlayerProfile; stats: PlayerStats }> {\n    const cacheKey = `player:${playerId}`;\n\n    // Check cache\n    const cached = cacheService.get<{ profile: PlayerProfile; stats: PlayerStats }>(cacheKey);\n    if (cached) {\n      return cached;\n    }\n\n    try {\n      // Mock implementation\n      const mockPlayer = Object.values(MOCK_PLAYERS).find((p) => p.id === playerId);\n      if (mockPlayer) {\n        const result = {\n          profile: {\n            id: mockPlayer.id,\n            name: mockPlayer.name,\n            club: mockPlayer.club,\n            position: mockPlayer.position,\n            nationality: mockPlayer.nationality,\n            age: mockPlayer.age,\n            photo: mockPlayer.photo,\n            shirtNumber: mockPlayer.shirtNumber,\n          },\n          stats: mockPlayer.stats,\n        };\n        cacheService.set(cacheKey, result, CACHE_TTL.PLAYER_DATA);\n        return result;\n      }\n\n      throw {\n        code: 'PLAYER_NOT_FOUND',\n        message: `Player with ID ${playerId} not found`,\n        statusCode: 404,\n      } as ApiError;\n    } catch (error) {\n      console.error('Failed to fetch player stats:', error);\n      throw this.handleApiError(error);\n    }\n  }\n\n  /**\n   * Get top players by stats\n   */\n  async getTopPlayers(limit: number = 10): Promise<(PlayerProfile & { stats: PlayerStats })[]> {\n    const cacheKey = `top-players:${limit}`;\n\n    const cached = cacheService.get<(PlayerProfile & { stats: PlayerStats })[]>(cacheKey);\n    if (cached) {\n      return cached;\n    }\n\n    try {\n      const players = Object.values(MOCK_PLAYERS).slice(0, limit);\n      cacheService.set(cacheKey, players, CACHE_TTL.SEARCH);\n      return players;\n    } catch (error) {\n      throw this.handleApiError(error);\n    }\n  }\n\n  /**\n   * Private helper: Search in mock data\n   */\n  private searchMockPlayers(name: string): SearchResponse {\n    const query = name.toLowerCase();\n    const results = Object.values(MOCK_PLAYERS)\n      .filter((p) => p.name.toLowerCase().includes(query))\n      .map((p) => ({\n        id: p.id,\n        name: p.name,\n        club: p.club,\n        position: p.position,\n        nationality: p.nationality,\n        age: p.age,\n        photo: p.photo,\n        shirtNumber: p.shirtNumber,\n        matchScore: this.calculateMatchScore(p.name, query),\n      }))\n      .sort((a, b) => b.matchScore - a.matchScore);\n\n    return {\n      results,\n      totalCount: results.length,\n    };\n  }\n\n  /**\n   * Calculate string match score (simple fuzzy matching)\n   */\n  private calculateMatchScore(playerName: string, query: string): number {\n    const name = playerName.toLowerCase();\n    const nameParts = name.split(' ');\n\n    // Exact match\n    if (name === query) return 100;\n\n    // Starts with query\n    if (name.startsWith(query)) return 90;\n\n    // Any part starts with query\n    if (nameParts.some((part) => part.startsWith(query))) return 80;\n\n    // Contains query\n    if (name.includes(query)) return 70;\n\n    return 50;\n  }\n\n  /**\n   * Handle API errors\n   */\n  private handleApiError(error: unknown): ApiError {\n    if (axios.isAxiosError(error)) {\n      const axiosError = error as AxiosError<{ message: string }>;\n      return {\n        code: 'API_ERROR',\n        message: axiosError.response?.data?.message || axiosError.message || 'API request failed',\n        statusCode: axiosError.response?.status || 500,\n      };\n    }\n\n    if (error && typeof error === 'object' && 'code' in error) {\n      return error as ApiError;\n    }\n\n    return {\n      code: 'UNKNOWN_ERROR',\n      message: error instanceof Error ? error.message : 'Unknown error occurred',\n      statusCode: 500,\n    };\n  }\n}\n\nexport const footballDataService = new FootballDataService();\n",
      "previousContent": null
    },
    {
      "path": "backend/src/services/influenceScoring.ts",
      "content": "import { PlayerStats, InfluenceScore, InfluenceWeights, PlayerProfile } from '../types';\n\n/**\n * Default influence weights\n * Can be adjusted per league or position\n */\nconst DEFAULT_WEIGHTS: InfluenceWeights = {\n  goals: 3,\n  assists: 2,\n  appearances: 1,\n  socialMentions: 0.5,\n};\n\nclass InfluenceScoringService {\n  /**\n   * Compute raw influence score\n   */\n  computeRawInfluence(stats: PlayerStats, weights?: InfluenceWeights): number {\n    const w = weights || DEFAULT_WEIGHTS;\n\n    return (\n      stats.goals * w.goals +\n      stats.assists * w.assists +\n      stats.appearances * w.appearances +\n      stats.socialMentions * w.socialMentions\n    );\n  }\n\n  /**\n   * Compute influence score with detailed breakdown\n   */\n  computeInfluence(\n    playerId: string,\n    playerName: string,\n    stats: PlayerStats,\n    weights?: InfluenceWeights,\n    maxInfluence?: number\n  ): InfluenceScore {\n    const w = weights || DEFAULT_WEIGHTS;\n\n    const breakdown = {\n      goalsScore: stats.goals * w.goals,\n      assistsScore: stats.assists * w.assists,\n      appearancesScore: stats.appearances * w.appearances,\n      socialScore: stats.socialMentions * w.socialMentions,\n    };\n\n    const influence = Object.values(breakdown).reduce((sum, score) => sum + score, 0);\n\n    // Normalize to 0-100 scale\n    let normalizedInfluence = 0;\n    if (maxInfluence && maxInfluence > 0) {\n      normalizedInfluence = (influence / maxInfluence) * 100;\n    } else {\n      // Fallback normalization using a reference scale\n      normalizedInfluence = this.normalizeScore(influence);\n    }\n\n    return {\n      playerId,\n      playerName,\n      influence,\n      normalizedInfluence: Math.min(100, Math.max(0, normalizedInfluence)), // Clamp to 0-100\n      breakdown,\n    };\n  }\n\n  /**\n   * Normalize scores to 0-100 scale using logarithmic function\n   * This handles the large variation in raw scores\n   */\n  private normalizeScore(score: number): number {\n    // Using log scale to compress large values\n    // Reference: Messi's influence is around 4000+\n    const logScore = Math.log10(Math.max(1, score));\n    const logMax = Math.log10(4500); // Expected max\n    return (logScore / logMax) * 100;\n  }\n\n  /**\n   * Rank players by influence score\n   */\n  rankPlayers(influenceScores: InfluenceScore[]): InfluenceScore[] {\n    return influenceScores\n      .sort((a, b) => b.normalizedInfluence - a.normalizedInfluence)\n      .map((score, index) => ({\n        ...score,\n        rank: index + 1,\n      }));\n  }\n\n  /**\n   * Get influence weights for specific league\n   */\n  getWeightsByLeague(league: string): InfluenceWeights {\n    // Different weights for different leagues\n    const leagueWeights: Record<string, InfluenceWeights> = {\n      Premier_League: { goals: 3.5, assists: 2.2, appearances: 1, socialMentions: 0.4 },\n      La_Liga: { goals: 3, assists: 2, appearances: 1, socialMentions: 0.6 },\n      Serie_A: { goals: 2.8, assists: 1.8, appearances: 1.2, socialMentions: 0.3 },\n      Bundesliga: { goals: 3.2, assists: 2, appearances: 0.9, socialMentions: 0.5 },\n      Ligue_1: { goals: 3, assists: 2.1, appearances: 1, socialMentions: 0.7 },\n    };\n\n    return leagueWeights[league] || DEFAULT_WEIGHTS;\n  }\n\n  /**\n   * Get influence weights for specific position\n   */\n  getWeightsByPosition(position: string): InfluenceWeights {\n    // Different weights for different positions\n    const positionWeights: Record<string, InfluenceWeights> = {\n      Forward: { goals: 4, assists: 2.5, appearances: 1, socialMentions: 0.6 },\n      Midfielder: { goals: 2.5, assists: 3, appearances: 1.2, socialMentions: 0.5 },\n      Defender: { goals: 1.5, assists: 1.5, appearances: 2, socialMentions: 0.3 },\n      Goalkeeper: { goals: 0, assists: 0, appearances: 3, socialMentions: 0.2 },\n    };\n\n    return positionWeights[position] || DEFAULT_WEIGHTS;\n  }\n\n  /**\n   * Get combined weights for position and league\n   */\n  getCombinedWeights(position: string, league?: string): InfluenceWeights {\n    const posWeights = this.getWeightsByPosition(position);\n    const leagueWeights = league ? this.getWeightsByLeague(league) : DEFAULT_WEIGHTS;\n\n    // Average the weights\n    return {\n      goals: (posWeights.goals + leagueWeights.goals) / 2,\n      assists: (posWeights.assists + leagueWeights.assists) / 2,\n      appearances: (posWeights.appearances + leagueWeights.appearances) / 2,\n      socialMentions: (posWeights.socialMentions + leagueWeights.socialMentions) / 2,\n    };\n  }\n\n  /**\n   * Compute comparison metrics between players\n   */\n  getComparisonMetrics(scores: InfluenceScore[]) {\n    if (scores.length === 0) {\n      return null;\n    }\n\n    const maxInfluence = Math.max(...scores.map((s) => s.normalizedInfluence));\n    const minInfluence = Math.min(...scores.map((s) => s.normalizedInfluence));\n    const avgInfluence = scores.reduce((sum, s) => sum + s.normalizedInfluence, 0) / scores.length;\n\n    const bestBreakdown = {\n      byGoals: scores.sort((a, b) => b.breakdown.goalsScore - a.breakdown.goalsScore)[0],\n      byAssists: scores.sort((a, b) => b.breakdown.assistsScore - a.breakdown.assistsScore)[0],\n      byAppearances: scores.sort((a, b) => b.breakdown.appearancesScore - a.breakdown.appearancesScore)[0],\n      bySocial: scores.sort((a, b) => b.breakdown.socialScore - a.breakdown.socialScore)[0],\n    };\n\n    return {\n      maxInfluence,\n      minInfluence,\n      avgInfluence,\n      bestBreakdown,\n    };\n  }\n}\n\nexport const influenceScoringService = new InfluenceScoringService();\n",
      "previousContent": null
    },
    {
      "path": "backend/src/routes/players.ts",
      "content": "import express, { Request, Response, NextFunction } from 'express';\nimport { footballDataService } from '../services/footballDataApi';\nimport { influenceScoringService } from '../services/influenceScoring';\nimport { InfluenceScore, SearchResponse, PlayerComparison, LeaderboardEntry } from '../types';\n\nconst router = express.Router();\n\n/**\n * GET /api/players?name=NAME\n * Search for players by name\n */\nrouter.get('/', async (req: Request, res: Response, next: NextFunction) => {\n  try {\n    const { name } = req.query;\n\n    if (!name || typeof name !== 'string' || name.trim().length === 0) {\n      return res.status(400).json({\n        error: 'Player name is required',\n        code: 'INVALID_REQUEST',\n      });\n    }\n\n    const result = await footballDataService.searchPlayers(name.trim());\n    res.json(result);\n  } catch (error) {\n    next(error);\n  }\n});\n\n/**\n * GET /api/players/:id/stats\n * Get detailed player stats\n */\nrouter.get('/:id/stats', async (req: Request, res: Response, next: NextFunction) => {\n  try {\n    const { id } = req.params;\n\n    if (!id) {\n      return res.status(400).json({\n        error: 'Player ID is required',\n        code: 'INVALID_REQUEST',\n      });\n    }\n\n    const playerData = await footballDataService.getPlayerStats(id);\n    res.json(playerData);\n  } catch (error) {\n    next(error);\n  }\n});\n\n/**\n * GET /api/players/:id/klout\n * Get influence score for a player\n */\nrouter.get('/:id/klout', async (req: Request, res: Response, next: NextFunction) => {\n  try {\n    const { id } = req.params;\n    const { position, league } = req.query;\n\n    if (!id) {\n      return res.status(400).json({\n        error: 'Player ID is required',\n        code: 'INVALID_REQUEST',\n      });\n    }\n\n    const { profile, stats } = await footballDataService.getPlayerStats(id);\n\n    // Get weights (use query params if provided)\n    let weights = undefined;\n    if (position && league) {\n      weights = influenceScoringService.getCombinedWeights(\n        position as string,\n        league as string\n      );\n    } else if (position) {\n      weights = influenceScoringService.getWeightsByPosition(position as string);\n    }\n\n    // Compute raw influence and normalize against top players\n    const topPlayers = await footballDataService.getTopPlayers(10);\n    const topInfluences = topPlayers.map((p) =>\n      influenceScoringService.computeRawInfluence(p.stats, weights)\n    );\n    const maxInfluence = Math.max(...topInfluences);\n\n    const influenceScore = influenceScoringService.computeInfluence(\n      id,\n      profile.name,\n      stats,\n      weights,\n      maxInfluence\n    );\n\n    res.json(influenceScore);\n  } catch (error) {\n    next(error);\n  }\n});\n\n/**\n * GET /api/players/leaderboard?limit=10&league=Premier_League&position=Forward\n * Get top players by influence\n */\nrouter.get('/leaderboard/top', async (req: Request, res: Response, next: NextFunction) => {\n  try {\n    const { limit = 10, league, position } = req.query;\n    const limitNum = Math.min(parseInt(limit as string) || 10, 100);\n\n    const topPlayers = await footballDataService.getTopPlayers(limitNum);\n\n    // Compute influence scores\n    let influenceScores: InfluenceScore[] = topPlayers.map((p) => {\n      let weights = undefined;\n      if (position && league) {\n        weights = influenceScoringService.getCombinedWeights(\n          position as string,\n          league as string\n        );\n      } else if (position) {\n        weights = influenceScoringService.getWeightsByPosition(position as string);\n      }\n\n      return influenceScoringService.computeRawInfluence(p.stats, weights);\n    });\n\n    // Find max for normalization\n    const maxInfluence = Math.max(...influenceScores.map((raw) => raw));\n\n    // Convert raw scores to InfluenceScore objects\n    const leaderboard: LeaderboardEntry[] = topPlayers.map((p, idx) => {\n      let weights = undefined;\n      if (position && league) {\n        weights = influenceScoringService.getCombinedWeights(\n          position as string,\n          league as string\n        );\n      } else if (position) {\n        weights = influenceScoringService.getWeightsByPosition(position as string);\n      }\n\n      return {\n        rank: idx + 1,\n        player: {\n          id: p.id,\n          name: p.name,\n          club: p.club,\n          position: p.position,\n          nationality: p.nationality,\n          age: p.age,\n          photo: p.photo,\n          shirtNumber: p.shirtNumber,\n        },\n        influence: influenceScoringService.computeInfluence(\n          p.id,\n          p.name,\n          p.stats,\n          weights,\n          maxInfluence\n        ),\n      };\n    });\n\n    res.json(leaderboard);\n  } catch (error) {\n    next(error);\n  }\n});\n\n/**\n * POST /api/players/compare\n * Compare multiple players side-by-side\n */\nrouter.post('/compare', async (req: Request, res: Response, next: NextFunction) => {\n  try {\n    const { playerIds } = req.body;\n\n    if (!Array.isArray(playerIds) || playerIds.length < 2 || playerIds.length > 5) {\n      return res.status(400).json({\n        error: 'Please provide 2-5 player IDs for comparison',\n        code: 'INVALID_REQUEST',\n      });\n    }\n\n    // Fetch all players\n    const playerPromises = playerIds.map((id: string) =>\n      footballDataService.getPlayerStats(id)\n    );\n    const playersData = await Promise.all(playerPromises);\n\n    // Compute influence scores\n    const influenceScores = playersData.map((p) =>\n      influenceScoringService.computeInfluence(\n        p.profile.id,\n        p.profile.name,\n        p.stats\n      )\n    );\n\n    // Find max for normalization\n    const allRawInfluences = influenceScores.map((s) => s.influence);\n    const maxInfluence = Math.max(...allRawInfluences);\n\n    // Recompute with proper normalization\n    const normalizedScores = playersData.map((p) =>\n      influenceScoringService.computeInfluence(\n        p.profile.id,\n        p.profile.name,\n        p.stats,\n        undefined,\n        maxInfluence\n      )\n    );\n\n    const comparison: PlayerComparison = {\n      players: playersData.map((p, idx) => ({\n        ...p,\n        influenceScore: normalizedScores[idx],\n      })),\n      maxInfluence: maxInfluence,\n    };\n\n    res.json(comparison);\n  } catch (error) {\n    next(error);\n  }\n});\n\nexport default router;\n",
      "previousContent": null
    },
    {
      "path": "backend/src/index.ts",
      "content": "import express, { Express, Request, Response, NextFunction } from 'express';\nimport cors from 'cors';\nimport dotenv from 'dotenv';\nimport playerRoutes from './routes/players';\nimport { ApiError } from './types';\n\ndotenv.config();\n\nconst app: Express = express();\nconst PORT = process.env.PORT || 5000;\n\n// Middleware\napp.use(cors());\napp.use(express.json());\n\n// Request logging\napp.use((req: Request, res: Response, next: NextFunction) => {\n  console.log(`${new Date().toISOString()} ${req.method} ${req.path}`);\n  next();\n});\n\n// Routes\napp.use('/api/players', playerRoutes);\n\n// Health check\napp.get('/api/health', (req: Request, res: Response) => {\n  res.json({\n    status: 'OK',\n    timestamp: new Date().toISOString(),\n  });\n});\n\n// 404 handler\napp.use((req: Request, res: Response) => {\n  res.status(404).json({\n    error: 'Not found',\n    code: 'NOT_FOUND',\n    path: req.path,\n  });\n});\n\n// Global error handler\napp.use((error: unknown, req: Request, res: Response, next: NextFunction) => {\n  console.error('Error:', error);\n\n  if (error && typeof error === 'object' && 'code' in error && 'statusCode' in error) {\n  if (error && typeof error === 'object' && 'statusCode' in error && typeof error.statusCode === 'number') {\n    const apiError = error as ApiError;\n    return res.status(apiError.statusCode).json({\n      error: apiError.message,\n      code: ('code' in apiError && typeof apiError.code === 'string') ? apiError.code : 'API_ERROR',\n    });\n  }\n\n  if (error instanceof Error) {\n    return res.status(500).json({\n      error: error.message,\n      code: 'INTERNAL_SERVER_ERROR',\n    });\n  }\n  \n  // Generic error handling for unexpected error types\n  if (error && typeof error === 'object' && 'message' in error && typeof error.message === 'string') {\n    return res.status(500).json({\n      error: error.message,\n      code: 'INTERNAL_SERVER_ERROR',\n    });\n  }\n\n  return res.status(500).json({\n    error: 'An unknown error occurred',\n    code: 'UNKNOWN_ERROR',\n  });\n\n  res.status(500).json({\n    error: 'An unexpected error occurred',\n    code: 'INTERNAL_SERVER_ERROR',\n  });\n});\n\napp.listen(PORT, () => {\n  console.log(`‚öΩ Soccer Klout API running on http://localhost:${PORT}`);\n  console.log(`üìä API Documentation:`);\n  console.log(`   GET  /api/health - Health check`);\n  console.log(`   GET  /api/players?name=NAME - Search players`);\n  console.log(`   GET  /api/players/:id/stats - Get player stats`);\n  console.log(`   GET  /api/players/:id/klout - Get influence score`);\n  console.log(`   GET  /api/players/leaderboard/top - Top players`);\n  console.log(`   POST /api/players/compare - Compare players`);\n});\n\nexport default app;\n",
      "previousContent": "import express, { Express, Request, Response, NextFunction } from 'express';\nimport cors from 'cors';\nimport dotenv from 'dotenv';\nimport playerRoutes from './routes/players';\nimport { ApiError } from './types';\n\ndotenv.config();\n\nconst app: Express = express();\nconst PORT = process.env.PORT || 5000;\n\n// Middleware\napp.use(cors());\napp.use(express.json());\n\n// Request logging\napp.use((req: Request, res: Response, next: NextFunction) => {\n  console.log(`${new Date().toISOString()} ${req.method} ${req.path}`);\n  next();\n});\n\n// Routes\napp.use('/api/players', playerRoutes);\n\n// Health check\napp.get('/api/health', (req: Request, res: Response) => {\n  res.json({\n    status: 'OK',\n    timestamp: new Date().toISOString(),\n  });\n});\n\n// 404 handler\napp.use((req: Request, res: Response) => {\n  res.status(404).json({\n    error: 'Not found',\n    code: 'NOT_FOUND',\n    path: req.path,\n  });\n});\n\n// Global error handler\napp.use((error: unknown, req: Request, res: Response, next: NextFunction) => {\n  console.error('Error:', error);\n\n  if (error && typeof error === 'object' && 'code' in error && 'statusCode' in error) {\n    const apiError = error as ApiError;\n    return res.status(apiError.statusCode).json({\n      error: apiError.message,\n      code: apiError.code,\n    });\n  }\n\n  if (error instanceof Error) {\n    return res.status(500).json({\n      error: error.message,\n      code: 'INTERNAL_SERVER_ERROR',\n    });\n  }\n\n  res.status(500).json({\n    error: 'An unexpected error occurred',\n    code: 'INTERNAL_SERVER_ERROR',\n  });\n});\n\napp.listen(PORT, () => {\n  console.log(`‚öΩ Soccer Klout API running on http://localhost:${PORT}`);\n  console.log(`üìä API Documentation:`);\n  console.log(`   GET  /api/health - Health check`);\n  console.log(`   GET  /api/players?name=NAME - Search players`);\n  console.log(`   GET  /api/players/:id/stats - Get player stats`);\n  console.log(`   GET  /api/players/:id/klout - Get influence score`);\n  console.log(`   GET  /api/players/leaderboard/top - Top players`);\n  console.log(`   POST /api/players/compare - Compare players`);\n});\n\nexport default app;\n"
    },
    {
      "path": "frontend/package.json",
      "content": "{\n  \"name\": \"soccer-klout-frontend\",\n  \"version\": \"0.1.0\",\n  \"private\": true,\n  \"dependencies\": {\n    \"react\": \"^18.2.0\",\n    \"react-dom\": \"^18.2.0\",\n    \"react-router-dom\": \"^6.14.0\",\n    \"axios\": \"^1.6.0\",\n    \"react-query\": \"^3.39.3\",\n    \"@tanstack/react-query\": \"^4.32.0\",\n    \"recharts\": \"^2.8.0\",\n    \"lucide-react\": \"^0.263.1\"\n  },\n  \"devDependencies\": {\n    \"@types/react\": \"^18.2.0\",\n    \"@types/react-dom\": \"^18.2.0\",\n    \"@types/node\": \"^20.0.0\",\n    \"typescript\": \"^5.0.0\",\n    \"tailwindcss\": \"^3.3.0\",\n    \"postcss\": \"^8.4.26\",\n    \"autoprefixer\": \"^10.4.14\"\n  },\n  \"scripts\": {\n    \"dev\": \"react-scripts start\",\n    \"build\": \"react-scripts build\",\n    \"test\": \"react-scripts test\",\n    \"eject\": \"react-scripts eject\"\n  },\n  \"eslintConfig\": {\n    \"extends\": [\n      \"react-app\"\n    ]\n  },\n  \"browserslist\": {\n    \"production\": [\n      \">0.2%\",\n      \"not dead\",\n      \"not op_mini all\"\n    ],\n    \"development\": [\n      \"last 1 chrome version\",\n      \"last 1 firefox version\",\n      \"last 1 safari version\"\n    ]\n  }\n}\n",
      "previousContent": null
    },
    {
      "path": "frontend/tsconfig.json",
      "content": "{\n  \"compilerOptions\": {\n    \"target\": \"ES2020\",\n    \"useDefineForClassFields\": true,\n    \"lib\": [\"ES2020\", \"DOM\", \"DOM.Iterable\"],\n    \"module\": \"ESNext\",\n    \"skipLibCheck\": true,\n    \"esModuleInterop\": true,\n    \"strict\": true,\n    \"resolveJsonModule\": true,\n    \"isolatedModules\": true,\n    \"noEmit\": true,\n    \"jsx\": \"react-jsx\",\n    \"moduleResolution\": \"bundler\",\n    \"allowImportingTsExtensions\": true,\n    \"noUnusedLocals\": false,\n    \"noUnusedParameters\": false,\n    \"noFallthroughCasesInSwitch\": true\n  },\n  \"include\": [\"src\"],\n  \"references\": [{ \"path\": \"./tsconfig.node.json\" }]\n}\n",
      "previousContent": null
    },
    {
      "path": "frontend/src/types.ts",
      "content": "/**\n * Frontend TypeScript types (mirrors backend types)\n */\n\nexport interface PlayerProfile {\n  id: string;\n  name: string;\n  club: string;\n  position: string;\n  nationality: string;\n  age: number;\n  photo?: string;\n  shirtNumber?: number;\n  matchScore?: number;\n}\n\nexport interface PlayerStats {\n  goals: number;\n  assists: number;\n  appearances: number;\n  socialMentions: number;\n}\n\nexport interface InfluenceBreakdown {\n  goalsScore: number;\n  assistsScore: number;\n  appearancesScore: number;\n  socialScore: number;\n}\n\nexport interface InfluenceScore {\n  playerId: string;\n  playerName: string;\n  influence: number;\n  normalizedInfluence: number;\n  breakdown: InfluenceBreakdown;\n  rank?: number;\n}\n\nexport interface PlayerWithStats {\n  profile: PlayerProfile;\n  stats: PlayerStats;\n}\n\nexport interface PlayerWithInfluence extends PlayerWithStats {\n  influenceScore: InfluenceScore;\n}\n\nexport interface SearchResponse {\n  results: PlayerProfile[];\n  totalCount: number;\n}\n\nexport interface LeaderboardEntry {\n  rank: number;\n  player: PlayerProfile;\n  influence: InfluenceScore;\n}\n\nexport interface PlayerComparison {\n  players: PlayerWithInfluence[];\n  maxInfluence: number;\n}\n\nexport interface ApiError {\n  error: string;\n  code: string;\n}\n",
      "previousContent": null
    },
    {
      "path": "frontend/src/api/client.ts",
      "content": "import axios from 'axios';\nimport {\n  SearchResponse,\n  PlayerWithStats,\n  InfluenceScore,\n  LeaderboardEntry,\n  PlayerComparison,\n} from '../types';\n\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\n\nconst client = axios.create({\n  baseURL: API_BASE_URL,\n  timeout: 10000,\n});\n\nexport const playerApi = {\n  /**\n   * Search for players by name\n   */\n  async searchPlayers(name: string): Promise<SearchResponse> {\n    const response = await client.get('/players', {\n      params: { name },\n    });\n    return response.data;\n  },\n\n  /**\n   * Get player stats\n   */\n  async getPlayerStats(playerId: string): Promise<PlayerWithStats> {\n    const response = await client.get(`/players/${playerId}/stats`);\n    return response.data;\n  },\n\n  /**\n   * Get player influence score\n   */\n  async getPlayerInfluence(\n    playerId: string,\n    position?: string,\n    league?: string\n  ): Promise<InfluenceScore> {\n    const response = await client.get(`/players/${playerId}/klout`, {\n      params: { position, league },\n    });\n    return response.data;\n  },\n\n  /**\n   * Get top players leaderboard\n   */\n  async getLeaderboard(\n    limit: number = 10,\n    league?: string,\n    position?: string\n  ): Promise<LeaderboardEntry[]> {\n    const response = await client.get('/players/leaderboard/top', {\n      params: { limit, league, position },\n    });\n    return response.data;\n  },\n\n  /**\n   * Compare multiple players\n   */\n  async comparePlayers(playerIds: string[]): Promise<PlayerComparison> {\n    const response = await client.post('/players/compare', {\n      playerIds,\n    });\n    return response.data;\n  },\n};\n\nexport default client;\n",
      "previousContent": null
    },
    {
      "path": "frontend/src/hooks/usePlayer.ts",
      "content": "import { useReducer, useCallback } from 'react';\nimport { PlayerWithStats, InfluenceScore, ApiError } from '../types';\nimport { playerApi } from '../api/client';\n\nexport interface PlayerState {\n  data: (PlayerWithStats & { influenceScore: InfluenceScore }) | null;\n  loading: boolean;\n  error: ApiError | null;\n}\n\ntype PlayerAction =\n  | { type: 'LOADING' }\n  | { type: 'SUCCESS'; payload: PlayerWithStats & { influenceScore: InfluenceScore } }\n  | { type: 'ERROR'; payload: ApiError }\n  | { type: 'RESET' };\n\nconst initialState: PlayerState = {\n  data: null,\n  loading: false,\n  error: null,\n};\n\nconst playerReducer = (state: PlayerState, action: PlayerAction): PlayerState => {\n  switch (action.type) {\n    case 'LOADING':\n      return { ...state, loading: true, error: null };\n    case 'SUCCESS':\n      return { ...state, loading: false, data: action.payload };\n    case 'ERROR':\n      return { ...state, loading: false, error: action.payload };\n    case 'RESET':\n      return initialState;\n    default:\n      return state;\n  }\n};\n\nexport const usePlayer = () => {\n  const [state, dispatch] = useReducer(playerReducer, initialState);\n\n  const fetchPlayer = useCallback(async (playerId: string, position?: string, league?: string) => {\n    dispatch({ type: 'LOADING' });\n    try {\n      const [profileData, influenceData] = await Promise.all([\n        playerApi.getPlayerStats(playerId),\n        playerApi.getPlayerInfluence(playerId, position, league),\n      ]);\n\n      dispatch({\n        type: 'SUCCESS',\n        payload: {\n          ...profileData,\n          influenceScore: influenceData,\n        },\n      });\n    } catch (error) {\n      dispatch({\n        type: 'ERROR',\n        payload: {\n          error: error instanceof Error ? error.message : 'Failed to fetch player',\n          code: 'FETCH_ERROR',\n        },\n      });\n    }\n  }, []);\n\n  return { ...state, fetchPlayer };\n};\n",
      "previousContent": null
    },
    {
      "path": "frontend/src/hooks/useSearch.ts",
      "content": "import { useReducer, useCallback, useRef, useEffect } from 'react';\nimport { PlayerProfile, SearchResponse, ApiError } from '../types';\nimport { playerApi } from '../api/client';\n\nexport interface SearchState {\n  query: string;\n  results: PlayerProfile[];\n  suggestions: PlayerProfile[];\n  loading: boolean;\n  error: ApiError | null;\n  searched: boolean;\n}\n\ntype SearchAction =\n  | { type: 'SET_QUERY'; payload: string }\n  | { type: 'SEARCH_LOADING' }\n  | { type: 'SEARCH_SUCCESS'; payload: SearchResponse }\n  | { type: 'SEARCH_ERROR'; payload: ApiError }\n  | { type: 'SET_SUGGESTIONS'; payload: PlayerProfile[] }\n  | { type: 'CLEAR' };\n\nconst initialState: SearchState = {\n  query: '',\n  results: [],\n  suggestions: [],\n  loading: false,\n  error: null,\n  searched: false,\n};\n\nconst searchReducer = (state: SearchState, action: SearchAction): SearchState => {\n  switch (action.type) {\n    case 'SET_QUERY':\n      return { ...state, query: action.payload };\n    case 'SEARCH_LOADING':\n      return { ...state, loading: true, error: null };\n    case 'SEARCH_SUCCESS':\n      return {\n        ...state,\n        loading: false,\n        results: action.payload.results,\n        suggestions: action.payload.results.slice(0, 5),\n        searched: true,\n      };\n    case 'SEARCH_ERROR':\n      return { ...state, loading: false, error: action.payload };\n    case 'SET_SUGGESTIONS':\n      return { ...state, suggestions: action.payload };\n    case 'CLEAR':\n      return initialState;\n    default:\n      return state;\n  }\n};\n\nexport const useSearch = () => {\n  const [state, dispatch] = useReducer(searchReducer, initialState);\n  const debounceTimer = useRef<NodeJS.Timeout>();\n\n  const search = useCallback(async (query: string) => {\n    if (!query.trim()) {\n      dispatch({ type: 'CLEAR' });\n      return;\n    }\n\n    dispatch({ type: 'SET_QUERY', payload: query });\n    dispatch({ type: 'SEARCH_LOADING' });\n\n    try {\n      const response = await playerApi.searchPlayers(query);\n      dispatch({\n        type: 'SEARCH_SUCCESS',\n        payload: response,\n      });\n    } catch (error) {\n      dispatch({\n        type: 'SEARCH_ERROR',\n        payload: {\n          error: error instanceof Error ? error.message : 'Search failed',\n          code: 'SEARCH_ERROR',\n        },\n      });\n    }\n  }, []);\n\n  const debouncedSearch = useCallback((query: string) => {\n    if (debounceTimer.current) {\n      clearTimeout(debounceTimer.current);\n    }\n\n    debounceTimer.current = setTimeout(() => {\n      search(query);\n    }, 300);\n  }, [search]);\n\n  const clear = useCallback(() => {\n    dispatch({ type: 'CLEAR' });\n  }, []);\n\n  useEffect(() => {\n    return () => {\n      if (debounceTimer.current) {\n        clearTimeout(debounceTimer.current);\n      }\n    };\n  }, []);\n\n  return {\n    ...state,\n    search,\n    debouncedSearch,\n    clear,\n  };\n};\n",
      "previousContent": null
    },
    {
      "path": "frontend/src/hooks/useLeaderboard.ts",
      "content": "import { useReducer, useCallback } from 'react';\nimport { LeaderboardEntry, ApiError } from '../types';\nimport { playerApi } from '../api/client';\n\nexport interface LeaderboardState {\n  entries: LeaderboardEntry[];\n  loading: boolean;\n  error: ApiError | null;\n  limit: number;\n  league?: string;\n  position?: string;\n}\n\ntype LeaderboardAction =\n  | { type: 'LOADING' }\n  | { type: 'SUCCESS'; payload: LeaderboardEntry[] }\n  | { type: 'ERROR'; payload: ApiError }\n  | { type: 'SET_FILTERS'; payload: { limit?: number; league?: string; position?: string } };\n\nconst initialState: LeaderboardState = {\n  entries: [],\n  loading: false,\n  error: null,\n  limit: 10,\n};\n\nconst leaderboardReducer = (state: LeaderboardState, action: LeaderboardAction): LeaderboardState => {\n  switch (action.type) {\n    case 'LOADING':\n      return { ...state, loading: true, error: null };\n    case 'SUCCESS':\n      return { ...state, loading: false, entries: action.payload };\n    case 'ERROR':\n      return { ...state, loading: false, error: action.payload };\n    case 'SET_FILTERS':\n      return { ...state, ...action.payload };\n    default:\n      return state;\n  }\n};\n\nexport const useLeaderboard = () => {\n  const [state, dispatch] = useReducer(leaderboardReducer, initialState);\n\n  const fetchLeaderboard = useCallback(\n    async (limit?: number, league?: string, position?: string) => {\n      dispatch({ type: 'LOADING' });\n      try {\n        const data = await playerApi.getLeaderboard(limit || state.limit, league, position);\n        dispatch({ type: 'SUCCESS', payload: data });\n      } catch (error) {\n        dispatch({\n          type: 'ERROR',\n          payload: {\n            error: error instanceof Error ? error.message : 'Failed to fetch leaderboard',\n            code: 'FETCH_ERROR',\n          },\n        });\n      }\n    },\n    [state.limit]\n  );\n\n  return {\n    ...state,\n    fetchLeaderboard,\n  };\n};\n",
      "previousContent": null
    },
    {
      "path": "frontend/src/hooks/useComparison.ts",
      "content": "import { useReducer, useCallback } from 'react';\nimport { PlayerComparison, ApiError } from '../types';\nimport { playerApi } from '../api/client';\n\nexport interface ComparisonState {\n  data: PlayerComparison | null;\n  selectedIds: string[];\n  loading: boolean;\n  error: ApiError | null;\n}\n\ntype ComparisonAction =\n  | { type: 'TOGGLE_PLAYER'; payload: string }\n  | { type: 'LOADING' }\n  | { type: 'SUCCESS'; payload: PlayerComparison }\n  | { type: 'ERROR'; payload: ApiError }\n  | { type: 'CLEAR' };\n\nconst initialState: ComparisonState = {\n  data: null,\n  selectedIds: [],\n  loading: false,\n  error: null,\n};\n\nconst comparisonReducer = (state: ComparisonState, action: ComparisonAction): ComparisonState => {\n  switch (action.type) {\n    case 'TOGGLE_PLAYER': {\n      const ids = state.selectedIds.includes(action.payload)\n        ? state.selectedIds.filter((id) => id !== action.payload)\n        : [...state.selectedIds, action.payload];\n\n      return { ...state, selectedIds: ids };\n    }\n    case 'LOADING':\n      return { ...state, loading: true, error: null };\n    case 'SUCCESS':\n      return { ...state, loading: false, data: action.payload };\n    case 'ERROR':\n      return { ...state, loading: false, error: action.payload };\n    case 'CLEAR':\n      return initialState;\n    default:\n      return state;\n  }\n};\n\nexport const useComparison = () => {\n  const [state, dispatch] = useReducer(comparisonReducer, initialState);\n\n  const togglePlayer = useCallback((playerId: string) => {\n    dispatch({ type: 'TOGGLE_PLAYER', payload: playerId });\n  }, []);\n\n  const compare = useCallback(async (playerIds?: string[]) => {\n    const ids = playerIds || state.selectedIds;\n\n    if (ids.length < 2 || ids.length > 5) {\n      dispatch({\n        type: 'ERROR',\n        payload: {\n          error: 'Please select 2-5 players to compare',\n          code: 'INVALID_SELECTION',\n        },\n      });\n      return;\n    }\n\n    dispatch({ type: 'LOADING' });\n    try {\n      const data = await playerApi.comparePlayers(ids);\n      dispatch({ type: 'SUCCESS', payload: data });\n    } catch (error) {\n      dispatch({\n        type: 'ERROR',\n        payload: {\n          error: error instanceof Error ? error.message : 'Failed to compare players',\n          code: 'COMPARE_ERROR',\n        },\n      });\n    }\n  }, [state.selectedIds]);\n\n  const clear = useCallback(() => {\n    dispatch({ type: 'CLEAR' });\n  }, []);\n\n  return {\n    ...state,\n    togglePlayer,\n    compare,\n    clear,\n  };\n};\n",
      "previousContent": null
    },
    {
      "path": "frontend/src/components/InfluenceCircle.tsx",
      "content": "import React from 'react';\n\ninterface InfluenceCircleProps {\n  score: number;\n  size?: 'sm' | 'md' | 'lg';\n  label?: string;\n}\n\nexport const InfluenceCircle: React.FC<InfluenceCircleProps> = ({\n  score,\n  size = 'md',\n  label = 'Influence',\n}) => {\n  const sizeMap = {\n    sm: { radius: 30, fontSize: 14 },\n    md: { radius: 50, fontSize: 20 },\n    lg: { radius: 80, fontSize: 32 },\n  };\n\n  const { radius, fontSize } = sizeMap[size];\n  const circumference = 2 * Math.PI * radius;\n  const strokeDashoffset = circumference - (score / 100) * circumference;\n\n  // Color based on score\n  const getColor = (s: number) => {\n    if (s >= 80) return '#22c55e'; // green\n    if (s >= 60) return '#3b82f6'; // blue\n    if (s >= 40) return '#f59e0b'; // amber\n    return '#ef4444'; // red\n  };\n\n  const color = getColor(score);\n\n  return (\n    <div className=\"flex flex-col items-center\">\n      <svg width={radius * 2.2} height={radius * 2.2} className=\"transform -rotate-90\">\n        {/* Background circle */}\n        <circle\n          cx={radius * 1.1}\n          cy={radius * 1.1}\n          r={radius}\n          fill=\"none\"\n          stroke=\"#e5e7eb\"\n          strokeWidth=\"4\"\n        />\n        {/* Progress circle */}\n        <circle\n          cx={radius * 1.1}\n          cy={radius * 1.1}\n          r={radius}\n          fill=\"none\"\n          stroke={color}\n          strokeWidth=\"4\"\n          strokeDasharray={circumference}\n          strokeDashoffset={strokeDashoffset}\n          strokeLinecap=\"round\"\n          style={{ transition: 'stroke-dashoffset 0.5s ease' }}\n        />\n      </svg>\n      <div className=\"absolute flex flex-col items-center justify-center\">\n        <span className=\"text-sm text-gray-500 font-medium\">{label}</span>\n        <span style={{ fontSize: `${fontSize}px`, color }} className=\"font-bold\">\n          {Math.round(score)}\n        </span>\n      </div>\n    </div>\n  );\n};\n\nexport default InfluenceCircle;\n",
      "previousContent": null
    },
    {
      "path": "frontend/src/components/PlayerCard.tsx",
      "content": "import React from 'react';\nimport { PlayerProfile } from '../types';\nimport { Award, Globe, Users } from 'lucide-react';\n\ninterface PlayerCardProps {\n  player: PlayerProfile;\n  onClick?: () => void;\n  selected?: boolean;\n  showStats?: boolean;\n}\n\nexport const PlayerCard: React.FC<PlayerCardProps> = ({\n  player,\n  onClick,\n  selected = false,\n  showStats = false,\n}) => {\n  return (\n    <div\n      onClick={onClick}\n      className={`p-4 rounded-lg border-2 transition-all cursor-pointer ${\n        selected\n          ? 'border-blue-500 bg-blue-50 shadow-lg'\n          : 'border-gray-200 bg-white hover:border-gray-300 hover:shadow-md'\n      }`}\n    >\n      {/* Player Photo */}\n      <div className=\"mb-3 flex justify-center\">\n        {player.photo ? (\n          <img src={player.photo} alt={player.name} className=\"w-16 h-16 rounded-full object-cover\" />\n        ) : (\n          <div className=\"w-16 h-16 rounded-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center\">\n            <Award className=\"w-8 h-8 text-white\" />\n          </div>\n        )}\n      </div>\n\n      {/* Player Info */}\n      <h3 className=\"font-bold text-lg text-center mb-1\">{player.name}</h3>\n\n      <div className=\"text-center text-sm text-gray-600 space-y-1\">\n        <p className=\"flex items-center justify-center gap-2\">\n          <Globe className=\"w-4 h-4\" />\n          {player.nationality}\n        </p>\n        <p className=\"font-semibold text-blue-600\">{player.club}</p>\n        <p className=\"text-gray-500\">\n          {player.position}\n          {player.shirtNumber && ` #${player.shirtNumber}`}\n        </p>\n        <p className=\"text-gray-500\">Age: {player.age}</p>\n      </div>\n\n      {/* Match Score (for search results) */}\n      {player.matchScore !== undefined && (\n        <div className=\"mt-2 pt-2 border-t border-gray-200\">\n          <div className=\"flex items-center justify-between text-xs\">\n            <span className=\"text-gray-600\">Match Score</span>\n            <div className=\"w-full ml-2 bg-gray-200 rounded-full h-1.5\">\n              <div\n                className=\"bg-blue-500 h-1.5 rounded-full\"\n                style={{ width: `${player.matchScore}%` }}\n              />\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Selection Indicator */}\n      {selected && (\n        <div className=\"mt-2 flex justify-center\">\n          <span className=\"text-xs font-semibold text-blue-600 bg-blue-100 px-2 py-1 rounded\">\n            ‚úì Selected\n          </span>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default PlayerCard;\n",
      "previousContent": null
    },
    {
      "path": "frontend/src/components/StatBar.tsx",
      "content": "import React from 'react';\n\ninterface StatBarProps {\n  label: string;\n  value: number;\n  max: number;\n  color?: string;\n  showValue?: boolean;\n}\n\nexport const StatBar: React.FC<StatBarProps> = ({\n  label,\n  value,\n  max,\n  color = 'bg-blue-500',\n  showValue = true,\n}) => {\n  const percentage = (value / max) * 100;\n\n  return (\n    <div className=\"mb-3\">\n      <div className=\"flex justify-between items-center mb-1\">\n        <span className=\"text-sm font-medium text-gray-700\">{label}</span>\n        {showValue && <span className=\"text-xs text-gray-600\">{Math.round(value)}</span>}\n      </div>\n      <div className=\"w-full bg-gray-200 rounded-full h-2\">\n        <div className={`${color} h-2 rounded-full transition-all`} style={{ width: `${percentage}%` }} />\n      </div>\n    </div>\n  );\n};\n\nexport default StatBar;\n",
      "previousContent": null
    },
    {
      "path": "frontend/src/pages/SearchPage.tsx",
      "content": "import React, { useState } from 'react';\nimport { useSearch } from '../hooks/useSearch';\nimport PlayerCard from '../components/PlayerCard';\nimport { Search, Loader } from 'lucide-react';\n\ninterface SearchPageProps {\n  onPlayerSelect?: (playerId: string) => void;\n}\n\nexport const SearchPage: React.FC<SearchPageProps> = ({ onPlayerSelect }) => {\n  const { query, results, suggestions, loading, error, searched, debouncedSearch, clear } =\n    useSearch();\n  const [showSuggestions, setShowSuggestions] = useState(false);\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = e.target.value;\n    debouncedSearch(value);\n    setShowSuggestions(true);\n  };\n\n  const handlePlayerClick = (playerId: string) => {\n    onPlayerSelect?.(playerId);\n  };\n\n  const handleSuggestionClick = (suggestion: typeof suggestions[0]) => {\n    handlePlayerClick(suggestion.id);\n    setShowSuggestions(false);\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-8 px-4\">\n      <div className=\"max-w-4xl mx-auto\">\n        {/* Header */}\n        <div className=\"text-center mb-8\">\n          <h1 className=\"text-4xl font-bold text-gray-800 mb-2\">‚öΩ Soccer Klout</h1>\n          <p className=\"text-gray-600\">Find and compare soccer players by influence score</p>\n        </div>\n\n        {/* Search Bar */}\n        <div className=\"mb-8 relative\">\n          <div className=\"relative\">\n            <Search className=\"absolute left-3 top-3 text-gray-400\" />\n            <input\n              type=\"text\"\n              placeholder=\"Search for a player (e.g., Messi, Ronaldo)...\"\n              onChange={handleInputChange}\n              onFocus={() => setShowSuggestions(true)}\n              className=\"w-full pl-10 pr-4 py-3 rounded-lg border-2 border-gray-300 focus:border-blue-500 focus:outline-none text-lg\"\n              autoComplete=\"off\"\n            />\n            {query && (\n              <button\n                onClick={() => {\n                  clear();\n                  setShowSuggestions(false);\n                }}\n                className=\"absolute right-3 top-3 text-gray-400 hover:text-gray-600\"\n              >\n                ‚úï\n              </button>\n            )}\n          </div>\n\n          {/* Suggestions Dropdown */}\n          {showSuggestions && suggestions.length > 0 && (\n            <div className=\"absolute top-full mt-2 w-full bg-white rounded-lg shadow-lg border border-gray-200 z-10 max-h-64 overflow-y-auto\">\n              {suggestions.map((player) => (\n                <button\n                  key={player.id}\n                  onClick={() => handleSuggestionClick(player)}\n                  className=\"w-full text-left px-4 py-3 hover:bg-gray-100 border-b border-gray-100 last:border-b-0 flex items-center justify-between\"\n                >\n                  <div>\n                    <p className=\"font-medium text-gray-800\">{player.name}</p>\n                    <p className=\"text-sm text-gray-600\">\n                      {player.position} ‚Ä¢ {player.club}\n                    </p>\n                  </div>\n                  <span className=\"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded\">\n                    {player.nationality}\n                  </span>\n                </button>\n              ))}\n            </div>\n          )}\n        </div>\n\n        {/* Loading State */}\n        {loading && (\n          <div className=\"flex justify-center items-center py-12\">\n            <Loader className=\"w-8 h-8 text-blue-500 animate-spin\" />\n            <span className=\"ml-2 text-gray-600\">Searching...</span>\n          </div>\n        )}\n\n        {/* Error State */}\n        {error && (\n          <div className=\"bg-red-50 border-2 border-red-200 rounded-lg p-4 mb-6\">\n            <p className=\"text-red-800 font-medium\">‚ùå {error.error}</p>\n          </div>\n        )}\n\n        {/* No Results */}\n        {searched && results.length === 0 && !loading && (\n          <div className=\"text-center py-12\">\n            <p className=\"text-gray-600 text-lg\">No players found. Try a different search!</p>\n          </div>\n        )}\n\n        {/* Results Grid */}\n        {results.length > 0 && (\n          <div>\n            <h2 className=\"text-xl font-bold text-gray-800 mb-4\">\n              Found {results.length} player{results.length !== 1 ? 's' : ''}\n            </h2>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n              {results.map((player) => (\n                <button\n                  key={player.id}\n                  onClick={() => handlePlayerClick(player.id)}\n                  className=\"text-left\"\n                >\n                  <PlayerCard player={player} />\n                </button>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {/* Info Box */}\n        {!searched && (\n          <div className=\"bg-blue-50 border-2 border-blue-200 rounded-lg p-6 text-center\">\n            <p className=\"text-gray-700\">\n              Start typing a player name above to search. Try popular players like{' '}\n              <span className=\"font-semibold text-blue-600\">Messi, Ronaldo, Haaland</span>, or{' '}\n              <span className=\"font-semibold text-blue-600\">Mbapp√©</span>.\n            </p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default SearchPage;\n",
      "previousContent": null
    },
    {
      "path": "frontend/src/pages/PlayerProfilePage.tsx",
      "content": "import React, { useEffect } from 'react';\nimport { usePlayer } from '../hooks/usePlayer';\nimport { useComparison } from '../hooks/useComparison';\nimport InfluenceCircle from '../components/InfluenceCircle';\nimport StatBar from '../components/StatBar';\nimport { Loader, ArrowLeft, Trophy } from 'lucide-react';\n\ninterface PlayerProfilePageProps {\n  playerId: string;\n  onBack?: () => void;\n  onCompare?: (playerId: string) => void;\n}\n\nexport const PlayerProfilePage: React.FC<PlayerProfilePageProps> = ({\n  playerId,\n  onBack,\n  onCompare,\n}) => {\n  const { data, loading, error, fetchPlayer } = usePlayer();\n\n  useEffect(() => {\n    fetchPlayer(playerId);\n  }, [playerId, fetchPlayer]);\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex justify-center items-center bg-gradient-to-br from-blue-50 to-indigo-100\">\n        <div className=\"text-center\">\n          <Loader className=\"w-12 h-12 text-blue-500 animate-spin mx-auto mb-2\" />\n          <p className=\"text-gray-600\">Loading player profile...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (error || !data) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-8 px-4\">\n        <div className=\"max-w-4xl mx-auto\">\n          <button\n            onClick={onBack}\n            className=\"mb-6 flex items-center gap-2 text-blue-600 hover:text-blue-700 font-medium\"\n          >\n            <ArrowLeft className=\"w-4 h-4\" />\n            Back to Search\n          </button>\n          <div className=\"bg-red-50 border-2 border-red-200 rounded-lg p-6\">\n            <p className=\"text-red-800 font-medium\">‚ùå {error?.error || 'Player not found'}</p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  const { profile, stats, influenceScore } = data;\n  const maxStats = Math.max(stats.goals, stats.assists, stats.appearances / 10);\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-8 px-4\">\n      <div className=\"max-w-4xl mx-auto\">\n        {/* Back Button */}\n        <button\n          onClick={onBack}\n          className=\"mb-6 flex items-center gap-2 text-blue-600 hover:text-blue-700 font-medium\"\n        >\n          <ArrowLeft className=\"w-4 h-4\" />\n          Back to Search\n        </button>\n\n        {/* Profile Header */}\n        <div className=\"bg-white rounded-lg shadow-lg p-8 mb-6\">\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n            {/* Player Photo & Basic Info */}\n            <div className=\"flex flex-col items-center justify-center\">\n              {profile.photo ? (\n                <img\n                  src={profile.photo}\n                  alt={profile.name}\n                  className=\"w-24 h-24 rounded-full object-cover mb-4\"\n                />\n              ) : (\n                <div className=\"w-24 h-24 rounded-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center mb-4\">\n                  <Trophy className=\"w-12 h-12 text-white\" />\n                </div>\n              )}\n              <h1 className=\"text-2xl font-bold text-center\">{profile.name}</h1>\n              <p className=\"text-gray-600 text-center mt-2\">{profile.club}</p>\n            </div>\n\n            {/* Influence Score Circle */}\n            <div className=\"flex items-center justify-center\">\n              <div className=\"relative w-40 h-40\">\n                <InfluenceCircle score={influenceScore.normalizedInfluence} size=\"lg\" />\n              </div>\n            </div>\n\n            {/* Key Stats */}\n            <div className=\"space-y-3\">\n              <div className=\"bg-blue-50 p-3 rounded-lg\">\n                <p className=\"text-sm text-gray-600\">Position</p>\n                <p className=\"text-lg font-bold\">{profile.position}</p>\n              </div>\n              <div className=\"bg-green-50 p-3 rounded-lg\">\n                <p className=\"text-sm text-gray-600\">Nationality</p>\n                <p className=\"text-lg font-bold\">{profile.nationality}</p>\n              </div>\n              <div className=\"bg-purple-50 p-3 rounded-lg\">\n                <p className=\"text-sm text-gray-600\">Age</p>\n                <p className=\"text-lg font-bold\">{profile.age}</p>\n              </div>\n              {profile.shirtNumber && (\n                <div className=\"bg-orange-50 p-3 rounded-lg\">\n                  <p className=\"text-sm text-gray-600\">Shirt Number</p>\n                  <p className=\"text-lg font-bold\">#{profile.shirtNumber}</p>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* Stats Section */}\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n          {/* Player Stats */}\n          <div className=\"bg-white rounded-lg shadow-lg p-6\">\n            <h2 className=\"text-xl font-bold mb-4\">Performance Stats</h2>\n            <StatBar\n              label=\"Goals\"\n              value={stats.goals}\n              max={maxStats}\n              color=\"bg-red-500\"\n              showValue\n            />\n            <StatBar\n              label=\"Assists\"\n              value={stats.assists}\n              max={maxStats}\n              color=\"bg-green-500\"\n              showValue\n            />\n            <StatBar\n              label=\"Appearances\"\n              value={stats.appearances / 10}\n              max={maxStats}\n              color=\"bg-blue-500\"\n              showValue={false}\n            />\n            <StatBar\n              label=\"Social Mentions\"\n              value={stats.socialMentions / 100000}\n              max={60}\n              color=\"bg-purple-500\"\n              showValue={false}\n            />\n          </div>\n\n          {/* Influence Breakdown */}\n          <div className=\"bg-white rounded-lg shadow-lg p-6\">\n            <h2 className=\"text-xl font-bold mb-4\">Influence Breakdown</h2>\n            <div className=\"space-y-3\">\n              <div className=\"flex justify-between items-center pb-2 border-b border-gray-200\">\n                <span className=\"text-gray-700\">Goals Score</span>\n                <span className=\"font-bold text-red-600\">{Math.round(influenceScore.breakdown.goalsScore)}</span>\n              </div>\n              <div className=\"flex justify-between items-center pb-2 border-b border-gray-200\">\n                <span className=\"text-gray-700\">Assists Score</span>\n                <span className=\"font-bold text-green-600\">\n                  {Math.round(influenceScore.breakdown.assistsScore)}\n                </span>\n              </div>\n              <div className=\"flex justify-between items-center pb-2 border-b border-gray-200\">\n                <span className=\"text-gray-700\">Appearances Score</span>\n                <span className=\"font-bold text-blue-600\">\n                  {Math.round(influenceScore.breakdown.appearancesScore)}\n                </span>\n              </div>\n              <div className=\"flex justify-between items-center pb-2 border-b border-gray-200\">\n                <span className=\"text-gray-700\">Social Score</span>\n                <span className=\"font-bold text-purple-600\">{Math.round(influenceScore.breakdown.socialScore)}</span>\n              </div>\n              <div className=\"flex justify-between items-center pt-2 border-t-2 border-gray-300 bg-gray-50 p-2 rounded\">\n                <span className=\"text-lg font-bold\">Total Influence</span>\n                <span className=\"text-2xl font-bold text-blue-600\">\n                  {Math.round(influenceScore.influence)}\n                </span>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Action Buttons */}\n        <div className=\"mt-6 flex gap-4 justify-center\">\n          <button\n            onClick={() => onCompare?.(playerId)}\n            className=\"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium\"\n          >\n            Compare with Others\n          </button>\n          <button\n            onClick={onBack}\n            className=\"px-6 py-3 bg-gray-300 text-gray-800 rounded-lg hover:bg-gray-400 font-medium\"\n          >\n            Search More Players\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default PlayerProfilePage;\n",
      "previousContent": null
    },
    {
      "path": "frontend/src/pages/LeaderboardPage.tsx",
      "content": "import React, { useEffect, useState } from 'react';\nimport { useLeaderboard } from '../hooks/useLeaderboard';\nimport PlayerCard from '../components/PlayerCard';\nimport InfluenceCircle from '../components/InfluenceCircle';\nimport { Loader, Trophy } from 'lucide-react';\n\ninterface LeaderboardPageProps {\n  onPlayerSelect?: (playerId: string) => void;\n}\n\nexport const LeaderboardPage: React.FC<LeaderboardPageProps> = ({ onPlayerSelect }) => {\n  const { entries, loading, error, fetchLeaderboard } = useLeaderboard();\n  const [limit, setLimit] = useState(10);\n  const [league, setLeague] = useState<string>('');\n  const [position, setPosition] = useState<string>('');\n\n  useEffect(() => {\n    fetchLeaderboard(limit, league || undefined, position || undefined);\n  }, [limit, league, position]);\n\n  const leagues = ['Premier_League', 'La_Liga', 'Serie_A', 'Bundesliga', 'Ligue_1'];\n  const positions = ['Forward', 'Midfielder', 'Defender', 'Goalkeeper'];\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-8 px-4\">\n      <div className=\"max-w-6xl mx-auto\">\n        {/* Header */}\n        <div className=\"text-center mb-8\">\n          <h1 className=\"text-4xl font-bold text-gray-800 mb-2 flex items-center justify-center gap-2\">\n            <Trophy className=\"w-10 h-10\" />\n            Player Leaderboard\n          </h1>\n          <p className=\"text-gray-600\">Top players ranked by influence score</p>\n        </div>\n\n        {/* Filters */}\n        <div className=\"bg-white rounded-lg shadow-lg p-6 mb-8\">\n          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Limit</label>\n              <select\n                value={limit}\n                onChange={(e) => setLimit(Number(e.target.value))}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500\"\n              >\n                <option value={5}>Top 5</option>\n                <option value={10}>Top 10</option>\n                <option value={20}>Top 20</option>\n                <option value={50}>Top 50</option>\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">League</label>\n              <select\n                value={league}\n                onChange={(e) => setLeague(e.target.value)}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500\"\n              >\n                <option value=\"\">All Leagues</option>\n                {leagues.map((l) => (\n                  <option key={l} value={l}>\n                    {l.replace('_', ' ')}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Position</label>\n              <select\n                value={position}\n                onChange={(e) => setPosition(e.target.value)}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500\"\n              >\n                <option value=\"\">All Positions</option>\n                {positions.map((p) => (\n                  <option key={p} value={p}>\n                    {p}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            <div className=\"flex items-end\">\n              <button\n                onClick={() => {\n                  setLeague('');\n                  setPosition('');\n                  setLimit(10);\n                }}\n                className=\"w-full px-4 py-2 bg-gray-300 text-gray-800 rounded-lg hover:bg-gray-400 font-medium\"\n              >\n                Reset Filters\n              </button>\n            </div>\n          </div>\n        </div>\n\n        {/* Loading State */}\n        {loading && (\n          <div className=\"flex justify-center items-center py-12\">\n            <Loader className=\"w-8 h-8 text-blue-500 animate-spin\" />\n            <span className=\"ml-2 text-gray-600\">Loading leaderboard...</span>\n          </div>\n        )}\n\n        {/* Error State */}\n        {error && (\n          <div className=\"bg-red-50 border-2 border-red-200 rounded-lg p-4 mb-6\">\n            <p className=\"text-red-800 font-medium\">‚ùå {error.error}</p>\n          </div>\n        )}\n\n        {/* Leaderboard Table */}\n        {entries.length > 0 && (\n          <div className=\"space-y-4\">\n            {entries.map((entry) => (\n              <div\n                key={entry.player.id}\n                onClick={() => onPlayerSelect?.(entry.player.id)}\n                className=\"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow cursor-pointer overflow-hidden\"\n              >\n                <div className=\"p-4 flex items-center gap-4\">\n                  {/* Rank Badge */}\n                  <div\n                    className={`flex-shrink-0 w-12 h-12 rounded-full flex items-center justify-center font-bold text-white text-lg ${\n                      entry.rank === 1\n                        ? 'bg-yellow-500'\n                        : entry.rank === 2\n                          ? 'bg-gray-400'\n                          : entry.rank === 3\n                            ? 'bg-orange-400'\n                            : 'bg-blue-500'\n                    }`}\n                  >\n                    {entry.rank}\n                  </div>\n\n                  {/* Player Info */}\n                  <div className=\"flex-grow\">\n                    <h3 className=\"font-bold text-lg\">{entry.player.name}</h3>\n                    <p className=\"text-sm text-gray-600\">\n                      {entry.player.position} ‚Ä¢ {entry.player.club} ‚Ä¢ {entry.player.nationality}\n                    </p>\n                  </div>\n\n                  {/* Stats */}\n                  <div className=\"hidden md:grid grid-cols-4 gap-4 flex-shrink-0\">\n                    <div className=\"text-center\">\n                      <p className=\"text-xs text-gray-600\">Goals</p>\n                      <p className=\"font-bold text-lg\">-</p>\n                    </div>\n                    <div className=\"text-center\">\n                      <p className=\"text-xs text-gray-600\">Assists</p>\n                      <p className=\"font-bold text-lg\">-</p>\n                    </div>\n                    <div className=\"text-center\">\n                      <p className=\"text-xs text-gray-600\">Apps</p>\n                      <p className=\"font-bold text-lg\">-</p>\n                    </div>\n                  </div>\n\n                  {/* Influence Score */}\n                  <div className=\"flex-shrink-0\">\n                    <div className=\"text-center\">\n                      <p className=\"text-xs text-gray-600 mb-1\">Influence</p>\n                      <div className=\"w-20 h-20\">\n                        <InfluenceCircle\n                          score={entry.influence.normalizedInfluence}\n                          size=\"sm\"\n                          label=\"\"\n                        />\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n\n        {/* Empty State */}\n        {!loading && entries.length === 0 && !error && (\n          <div className=\"text-center py-12 bg-white rounded-lg\">\n            <p className=\"text-gray-600 text-lg\">No players found with these filters.</p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default LeaderboardPage;\n",
      "previousContent": null
    },
    {
      "path": "frontend/src/pages/ComparisonPage.tsx",
      "content": "import React, { useEffect } from 'react';\nimport { useComparison } from '../hooks/useComparison';\nimport { useSearch } from '../hooks/useSearch';\nimport PlayerCard from '../components/PlayerCard';\nimport InfluenceCircle from '../components/InfluenceCircle';\nimport StatBar from '../components/StatBar';\nimport {\n  BarChart,\n  Bar,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  Legend,\n  ResponsiveContainer,\n  RadarChart,\n  PolarGrid,\n  PolarAngleAxis,\n  PolarRadiusAxis,\n  Radar,\n} from 'recharts';\nimport { Loader, ArrowLeft, X } from 'lucide-react';\n\ninterface ComparisonPageProps {\n  initialPlayerIds?: string[];\n  onBack?: () => void;\n}\n\nexport const ComparisonPage: React.FC<ComparisonPageProps> = ({\n  initialPlayerIds = [],\n  onBack,\n}) => {\n  const { data, selectedIds, loading, error, togglePlayer, compare, clear } = useComparison();\n  const { results, debouncedSearch } = useSearch();\n\n  useEffect(() => {\n    if (initialPlayerIds.length > 0) {\n      compare(initialPlayerIds);\n    }\n  }, []);\n\n  const handleCompare = () => {\n    compare();\n  };\n\n  const chartData =\n    data?.players.map((p) => ({\n      name: p.profile.name,\n      influence: p.influenceScore.normalizedInfluence,\n      goals: p.stats.goals,\n      assists: p.stats.assists,\n      appearances: p.stats.appearances / 100,\n    })) || [];\n\n  const radarData =\n    data?.players.map((p) => ({\n      stat: p.profile.name,\n      influence: p.influenceScore.normalizedInfluence,\n      goals: (p.stats.goals / Math.max(...(data?.players.map((x) => x.stats.goals) || [1]))) * 100,\n      assists: (p.stats.assists / Math.max(...(data?.players.map((x) => x.stats.assists) || [1]))) * 100,\n      appearances:\n        (p.stats.appearances / Math.max(...(data?.players.map((x) => x.stats.appearances) || [1]))) *\n        100,\n    })) || [];\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-8 px-4\">\n      <div className=\"max-w-6xl mx-auto\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between mb-8\">\n          <div>\n            <h1 className=\"text-4xl font-bold text-gray-800 mb-2\">Player Comparison</h1>\n            <p className=\"text-gray-600\">Select 2-5 players to compare their stats and influence</p>\n          </div>\n          <button\n            onClick={onBack}\n            className=\"flex items-center gap-2 text-blue-600 hover:text-blue-700 font-medium\"\n          >\n            <ArrowLeft className=\"w-4 h-4\" />\n            Back\n          </button>\n        </div>\n\n        {/* Player Selection */}\n        <div className=\"bg-white rounded-lg shadow-lg p-6 mb-8\">\n          <h2 className=\"text-lg font-bold mb-4\">Selected Players ({selectedIds.length}/5)</h2>\n\n          {/* Selected Players Display */}\n          {selectedIds.length > 0 && (\n            <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3 mb-6\">\n              {selectedIds.map((id) => {\n                const playerData = data?.players.find((p) => p.profile.id === id);\n                return playerData ? (\n                  <div\n                    key={id}\n                    className=\"p-3 bg-blue-50 rounded-lg border-2 border-blue-200 relative\"\n                  >\n                    <button\n                      onClick={() => togglePlayer(id)}\n                      className=\"absolute top-1 right-1 text-gray-500 hover:text-gray-700\"\n                    >\n                      <X className=\"w-4 h-4\" />\n                    </button>\n                    <p className=\"font-semibold text-sm truncate\">{playerData.profile.name}</p>\n                    <p className=\"text-xs text-gray-600\">{playerData.profile.position}</p>\n                  </div>\n                ) : null;\n              })}\n            </div>\n          )}\n\n          {/* Search for Players */}\n          <div className=\"mb-4\">\n            <input\n              type=\"text\"\n              placeholder=\"Search and add players...\"\n              onChange={(e) => debouncedSearch(e.target.value)}\n              className=\"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none\"\n            />\n          </div>\n\n          {/* Search Results */}\n          {results.length > 0 && (\n            <div className=\"mb-4 grid grid-cols-1 md:grid-cols-2 gap-3 max-h-64 overflow-y-auto\">\n              {results.map((player) => (\n                <button\n                  key={player.id}\n                  onClick={() => {\n                    if (!selectedIds.includes(player.id) && selectedIds.length < 5) {\n                      togglePlayer(player.id);\n                    }\n                  }}\n                  disabled={selectedIds.includes(player.id) || selectedIds.length >= 5}\n                  className={`p-3 rounded-lg border-2 text-left transition-all ${\n                    selectedIds.includes(player.id)\n                      ? 'border-blue-500 bg-blue-50 cursor-default'\n                      : 'border-gray-300 hover:border-gray-400 hover:bg-gray-50 ' +\n                        (selectedIds.length >= 5 ? 'opacity-50 cursor-not-allowed' : 'cursor-pointer')\n                  }`}\n                >\n                  <p className=\"font-semibold text-sm\">{player.name}</p>\n                  <p className=\"text-xs text-gray-600\">\n                    {player.position} ‚Ä¢ {player.club}\n                  </p>\n                </button>\n              ))}\n            </div>\n          )}\n\n          {/* Action Buttons */}\n          <div className=\"flex gap-3\">\n            <button\n              onClick={handleCompare}\n              disabled={selectedIds.length < 2}\n              className={`flex-1 px-4 py-2 rounded-lg font-medium ${\n                selectedIds.length < 2\n                  ? 'bg-gray-300 text-gray-500 cursor-not-allowed'\n                  : 'bg-blue-600 text-white hover:bg-blue-700'\n              }`}\n            >\n              Compare ({selectedIds.length})\n            </button>\n            {selectedIds.length > 0 && (\n              <button\n                onClick={() => {\n                  clear();\n                }}\n                className=\"px-4 py-2 bg-gray-300 text-gray-800 rounded-lg hover:bg-gray-400 font-medium\"\n              >\n                Clear\n              </button>\n            )}\n          </div>\n        </div>\n\n        {/* Loading State */}\n        {loading && (\n          <div className=\"flex justify-center items-center py-12\">\n            <Loader className=\"w-8 h-8 text-blue-500 animate-spin\" />\n            <span className=\"ml-2 text-gray-600\">Comparing players...</span>\n          </div>\n        )}\n\n        {/* Error State */}\n        {error && (\n          <div className=\"bg-red-50 border-2 border-red-200 rounded-lg p-4 mb-6\">\n            <p className=\"text-red-800 font-medium\">‚ùå {error.error}</p>\n          </div>\n        )}\n\n        {/* Comparison Results */}\n        {data && !loading && (\n          <div className=\"space-y-6\">\n            {/* Influence Score Cards */}\n            <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4\">\n              {data.players.map((player) => (\n                <div key={player.profile.id} className=\"bg-white rounded-lg shadow-lg p-4\">\n                  <h3 className=\"font-bold text-center mb-3\">{player.profile.name}</h3>\n                  <div className=\"flex justify-center mb-3\">\n                    <div className=\"w-24 h-24\">\n                      <InfluenceCircle\n                        score={player.influenceScore.normalizedInfluence}\n                        size=\"md\"\n                        label=\"Influence\"\n                      />\n                    </div>\n                  </div>\n                  <p className=\"text-center text-xs text-gray-600\">{player.profile.position}</p>\n                </div>\n              ))}\n            </div>\n\n            {/* Bar Chart - Influence Comparison */}\n            <div className=\"bg-white rounded-lg shadow-lg p-6\">\n              <h2 className=\"text-lg font-bold mb-4\">Influence Score Comparison</h2>\n              <ResponsiveContainer width=\"100%\" height={300}>\n                <BarChart data={chartData}>\n                  <CartesianGrid strokeDasharray=\"3 3\" />\n                  <XAxis dataKey=\"name\" angle={-45} textAnchor=\"end\" height={80} />\n                  <YAxis />\n                  <Tooltip />\n                  <Bar dataKey=\"influence\" fill=\"#3b82f6\" />\n                </BarChart>\n              </ResponsiveContainer>\n            </div>\n\n            {/* Radar Chart - Stat Comparison */}\n            {radarData.length > 1 && (\n              <div className=\"bg-white rounded-lg shadow-lg p-6\">\n                <h2 className=\"text-lg font-bold mb-4\">Performance Radar</h2>\n                <ResponsiveContainer width=\"100%\" height={400}>\n                  <RadarChart data={radarData}>\n                    <PolarGrid />\n                    <PolarAngleAxis dataKey=\"stat\" />\n                    <PolarRadiusAxis angle={90} domain={[0, 100]} />\n                    {data.players.map((player, idx) => (\n                      <Radar\n                        key={player.profile.id}\n                        name={player.profile.name}\n                        dataKey={['influence', 'goals', 'assists', 'appearances'][idx % 4]}\n                        stroke={['#3b82f6', '#ef4444', '#22c55e', '#f59e0b'][idx % 4]}\n                        fill={['#3b82f6', '#ef4444', '#22c55e', '#f59e0b'][idx % 4]}\n                        fillOpacity={0.25}\n                      />\n                    ))}\n                    <Legend />\n                  </RadarChart>\n                </ResponsiveContainer>\n              </div>\n            )}\n\n            {/* Detailed Stats */}\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n              {data.players.map((player) => (\n                <div key={player.profile.id} className=\"bg-white rounded-lg shadow-lg p-6\">\n                  <h3 className=\"text-lg font-bold mb-4\">{player.profile.name}</h3>\n                  <div className=\"space-y-3\">\n                    <StatBar\n                      label=\"Goals\"\n                      value={player.stats.goals}\n                      max={Math.max(...data.players.map((p) => p.stats.goals))}\n                      color=\"bg-red-500\"\n                    />\n                    <StatBar\n                      label=\"Assists\"\n                      value={player.stats.assists}\n                      max={Math.max(...data.players.map((p) => p.stats.assists))}\n                      color=\"bg-green-500\"\n                    />\n                    <StatBar\n                      label=\"Appearances\"\n                      value={player.stats.appearances / 10}\n                      max={Math.max(...data.players.map((p) => p.stats.appearances)) / 10}\n                      color=\"bg-blue-500\"\n                    />\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {/* Empty State */}\n        {!loading && !data && (\n          <div className=\"text-center py-12 bg-white rounded-lg\">\n            <p className=\"text-gray-600 text-lg\">\n              Select 2-5 players and click Compare to see detailed comparison charts\n            </p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default ComparisonPage;\n",
      "previousContent": null
    },
    {
      "path": "frontend/src/App.tsx",
      "content": "import React, { useState } from 'react';\nimport SearchPage from './pages/SearchPage';\nimport PlayerProfilePage from './pages/PlayerProfilePage';\nimport LeaderboardPage from './pages/LeaderboardPage';\nimport ComparisonPage from './pages/ComparisonPage';\nimport { BarChart3, Search, Users, Trophy } from 'lucide-react';\n\ntype PageType = 'search' | 'profile' | 'leaderboard' | 'comparison';\n\ninterface AppState {\n  currentPage: PageType;\n  selectedPlayerId?: string;\n  comparisonPlayerIds?: string[];\n}\n\nfunction App() {\n  const [appState, setAppState] = useState<AppState>({\n    currentPage: 'search',\n  });\n\n  const handlePlayerSelect = (playerId: string) => {\n    setAppState({\n      currentPage: 'profile',\n      selectedPlayerId: playerId,\n    });\n  };\n\n  const handleCompare = (playerId: string) => {\n    setAppState({\n      currentPage: 'comparison',\n      comparisonPlayerIds: [playerId],\n    });\n  };\n\n  const handleBackToSearch = () => {\n    setAppState({\n      currentPage: 'search',\n    });\n  };\n\n  const handleNavigate = (page: PageType) => {\n    setAppState({\n      currentPage: page,\n    });\n  };\n\n  const renderPage = () => {\n    switch (appState.currentPage) {\n      case 'profile':\n        return (\n          <PlayerProfilePage\n            playerId={appState.selectedPlayerId || ''}\n            onBack={handleBackToSearch}\n            onCompare={handleCompare}\n          />\n        );\n      case 'leaderboard':\n        return <LeaderboardPage onPlayerSelect={handlePlayerSelect} />;\n      case 'comparison':\n        return (\n          <ComparisonPage\n            initialPlayerIds={appState.comparisonPlayerIds}\n            onBack={handleBackToSearch}\n          />\n        );\n      case 'search':\n      default:\n        return <SearchPage onPlayerSelect={handlePlayerSelect} />;\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen\">\n      {/* Navigation Bar */}\n      <nav className=\"bg-white shadow-lg sticky top-0 z-50\">\n        <div className=\"max-w-6xl mx-auto px-4 py-3\">\n          <div className=\"flex items-center justify-between\">\n            {/* Logo */}\n            <div className=\"flex items-center gap-2 cursor-pointer\" onClick={() => handleNavigate('search')}>\n              <div className=\"text-2xl\">‚öΩ</div>\n              <h1 className=\"text-2xl font-bold text-blue-600\">Soccer Klout</h1>\n            </div>\n\n            {/* Navigation Links */}\n            <div className=\"flex items-center gap-1\">\n              <button\n                onClick={() => handleNavigate('search')}\n                className={`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all ${\n                  appState.currentPage === 'search'\n                    ? 'bg-blue-600 text-white'\n                    : 'text-gray-700 hover:bg-gray-100'\n                }`}\n              >\n                <Search className=\"w-4 h-4\" />\n                <span className=\"hidden sm:inline\">Search</span>\n              </button>\n\n              <button\n                onClick={() => handleNavigate('leaderboard')}\n                className={`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all ${\n                  appState.currentPage === 'leaderboard'\n                    ? 'bg-blue-600 text-white'\n                    : 'text-gray-700 hover:bg-gray-100'\n                }`}\n              >\n                <Trophy className=\"w-4 h-4\" />\n                <span className=\"hidden sm:inline\">Leaderboard</span>\n              </button>\n\n              <button\n                onClick={() => handleNavigate('comparison')}\n                className={`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all ${\n                  appState.currentPage === 'comparison'\n                    ? 'bg-blue-600 text-white'\n                    : 'text-gray-700 hover:bg-gray-100'\n                }`}\n              >\n                <BarChart3 className=\"w-4 h-4\" />\n                <span className=\"hidden sm:inline\">Compare</span>\n              </button>\n            </div>\n          </div>\n        </div>\n      </nav>\n\n      {/* Page Content */}\n      <main>{renderPage()}</main>\n\n      {/* Footer */}\n      <footer className=\"bg-gray-800 text-white mt-12 py-6\">\n        <div className=\"max-w-6xl mx-auto px-4 text-center\">\n          <p className=\"text-sm\">\n            ‚öΩ Soccer Klout - Discover and compare player influence scores\n          </p>\n          <p className=\"text-xs text-gray-400 mt-2\">\n            ¬© 2024 Soccer Klout. Data sourced from football statistics APIs.\n          </p>\n        </div>\n      </footer>\n    </div>\n  );\n}\n\nexport default App;\n",
      "previousContent": null
    },
    {
      "path": "frontend/src/index.tsx",
      "content": "import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport App from './App';\nimport './index.css';\n\nconst root = ReactDOM.createRoot(document.getElementById('root') as HTMLElement);\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n",
      "previousContent": null
    },
    {
      "path": "frontend/src/index.css",
      "content": "@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\nbody {\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu',\n    'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\ncode {\n  font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New', monospace;\n}\n\n/* Custom scrollbar */\n::-webkit-scrollbar {\n  width: 8px;\n  height: 8px;\n}\n\n::-webkit-scrollbar-track {\n  background: #f1f1f1;\n}\n\n::-webkit-scrollbar-thumb {\n  background: #888;\n  border-radius: 4px;\n}\n\n::-webkit-scrollbar-thumb:hover {\n  background: #555;\n}\n",
      "previousContent": null
    },
    {
      "path": "frontend/public/index.html",
      "content": "<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"utf-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n    <meta name=\"theme-color\" content=\"#000000\" />\n    <meta\n      name=\"description\"\n      content=\"Soccer Klout - Discover and compare soccer player influence scores\"\n    />\n    <title>‚öΩ Soccer Klout - Player Influence Scoring</title>\n  </head>\n  <body>\n    <noscript>You need to enable JavaScript to run this app.</noscript>\n    <div id=\"root\"></div>\n  </body>\n</html>\n",
      "previousContent": null
    },
    {
      "path": "frontend/tailwind.config.js",
      "content": "/** @type {import('tailwindcss').Config} */\nexport default {\n  content: [\n    \"./index.html\",\n    \"./src/**/*.{js,ts,jsx,tsx}\",\n  ],\n  theme: {\n    extend: {\n      colors: {\n        primary: '#3b82f6',\n        secondary: '#10b981',\n      },\n      animation: {\n        'spin': 'spin 1s linear infinite',\n      }\n    },\n  },\n  plugins: [],\n}\n",
      "previousContent": null
    },
    {
      "path": "backend/.env.example",
      "content": "PORT=5000\nNODE_ENV=development\nFOOTBALL_DATA_API_KEY=demo\n",
      "previousContent": null
    },
    {
      "path": "README.md",
      "content": "# ‚öΩ Soccer Klout - Player Influence Scoring Web App\n\nA full-stack web application for discovering and comparing soccer players based on their **influence scores**. Similar to Klout for social media, this app calculates player influence from multiple metrics including goals, assists, match appearances, and social media mentions.\n\n## üéØ Features\n\n### Backend (Node.js + TypeScript + Express)\n\n‚úÖ **Player Search API**\n- Search players by name with autocomplete suggestions\n- Match scoring algorithm for relevance ranking\n- Cached API responses to avoid rate limits\n\n‚úÖ **Player Stats & Profiles**\n- Detailed player information (name, club, position, nationality, age)\n- Performance stats (goals, assists, appearances, social mentions)\n- Real-time stat retrieval with caching\n\n‚úÖ **Influence Score Calculation**\n- Formula: `influence = goals √ó 3 + assists √ó 2 + appearances √ó 1 + socialMentions √ó 0.5`\n- Normalized scoring to 0-100 scale\n- League-specific and position-specific weight adjustments\n- Detailed score breakdown (goals, assists, appearances, social)\n\n‚úÖ **Leaderboard**\n- Top 10-50 players ranked by influence\n- Filter by league and position\n- Dynamic ranking with normalization\n\n‚úÖ **Player Comparison**\n- Compare 2-5 players side-by-side\n- Visual charts showing influence differences\n- Performance radar charts\n- Detailed stat breakdowns\n\n‚úÖ **Caching & Performance**\n- In-memory caching with configurable TTLs\n- Automatic cache expiration\n- Graceful error handling\n- Support for thousands of requests\n\n### Frontend (React + TypeScript + Tailwind CSS)\n\n‚úÖ **Search Page**\n- Live search with debounce\n- Autocomplete suggestions\n- Result grid with player cards\n- Responsive design for mobile/tablet\n\n‚úÖ **Player Profile Page**\n- Large influence score circle (0-100)\n- Performance stats with visual bars\n- Influence breakdown by category\n- Call-to-action buttons (Compare, Search More)\n\n‚úÖ **Leaderboard Page**\n- Top players ranked with badges\n- Filterable by league and position\n- Adjustable limit (5, 10, 20, 50)\n- Responsive table/card layout\n\n‚úÖ **Comparison Page**\n- Multi-player selection (2-5 players)\n- Bar charts for influence comparison\n- Radar charts for stat comparison\n- Side-by-side performance stats\n- Visual influence score circles\n\n‚úÖ **State Management**\n- useReducer hooks for complex state\n- Debounced search for performance\n- API response caching\n- Error boundaries and fallbacks\n\n‚úÖ **UI/UX**\n- Modern gradient design\n- Color-coded influence levels\n- Mobile-responsive layouts\n- Smooth animations and transitions\n- Interactive charts (Recharts)\n- Lucide icons for visual clarity\n\n## üèóÔ∏è Project Structure\n\n```\nsoccer-klout/\n‚îú‚îÄ‚îÄ backend/\n‚îÇ   ‚îú‚îÄ‚îÄ src/\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.ts                 # Express server setup\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ types.ts                 # TypeScript types\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/\n‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cache.ts             # Caching service\n‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ footballDataApi.ts   # API client & mock data\n‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ influenceScoring.ts  # Scoring algorithm\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ routes/\n‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ players.ts           # API endpoints\n‚îÇ   ‚îú‚îÄ‚îÄ package.json\n‚îÇ   ‚îú‚îÄ‚îÄ tsconfig.json\n‚îÇ   ‚îî‚îÄ‚îÄ .env.example\n‚îÇ\n‚îú‚îÄ‚îÄ frontend/\n‚îÇ   ‚îú‚îÄ‚îÄ src/\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.tsx                # React entry point\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.css                # Global styles\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ App.tsx                  # Main app component\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ types.ts                 # TypeScript types\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api/\n‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ client.ts            # API client\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hooks/\n‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ usePlayer.ts         # Player data hook\n‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useSearch.ts         # Search hook\n‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useLeaderboard.ts    # Leaderboard hook\n‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ useComparison.ts     # Comparison hook\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/\n‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ InfluenceCircle.tsx  # Circular progress\n‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PlayerCard.tsx       # Player card component\n‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ StatBar.tsx          # Progress bar\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ pages/\n‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ SearchPage.tsx       # Main search interface\n‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ PlayerProfilePage.tsx # Player details\n‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ LeaderboardPage.tsx  # Rankings\n‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ ComparisonPage.tsx   # Multi-player comparison\n‚îÇ   ‚îú‚îÄ‚îÄ public/\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.html\n‚îÇ   ‚îú‚îÄ‚îÄ package.json\n‚îÇ   ‚îú‚îÄ‚îÄ tsconfig.json\n‚îÇ   ‚îî‚îÄ‚îÄ tailwind.config.js\n‚îÇ\n‚îî‚îÄ‚îÄ README.md\n```\n\n## üöÄ Getting Started\n\n### Prerequisites\n\n- Node.js 16+ and npm\n- Git\n\n### Backend Setup\n\n```bash\ncd backend\n\n# Install dependencies\nnpm install\n\n# Create .env file\ncp .env.example .env\n\n# Build TypeScript\nnpm run build\n\n# Start development server\nnpm run dev\n\n# Server runs on http://localhost:5000\n```\n\n### Frontend Setup\n\n```bash\ncd frontend\n\n# Install dependencies\nnpm install\n\n# Start development server\nnpm run dev\n\n# App opens on http://localhost:3000\n```\n\n## üìä API Endpoints\n\n### Search Players\n```\nGET /api/players?name=NAME\n```\nResponse:\n```json\n{\n  \"results\": [\n    {\n      \"id\": \"1\",\n      \"name\": \"Lionel Messi\",\n      \"club\": \"Inter Miami CF\",\n      \"position\": \"Forward\",\n      \"nationality\": \"Argentina\",\n      \"age\": 37,\n      \"matchScore\": 100\n    }\n  ],\n  \"totalCount\": 1\n}\n```\n\n### Get Player Stats\n```\nGET /api/players/:id/stats\n```\nResponse:\n```json\n{\n  \"profile\": {\n    \"id\": \"1\",\n    \"name\": \"Lionel Messi\",\n    \"club\": \"Inter Miami CF\",\n    \"position\": \"Forward\",\n    \"nationality\": \"Argentina\",\n    \"age\": 37\n  },\n  \"stats\": {\n    \"goals\": 807,\n    \"assists\": 318,\n    \"appearances\": 1000,\n    \"socialMentions\": 5000000\n  }\n}\n```\n\n### Get Influence Score\n```\nGET /api/players/:id/klout?position=Forward&league=Premier_League\n```\nResponse:\n```json\n{\n  \"playerId\": \"1\",\n  \"playerName\": \"Lionel Messi\",\n  \"influence\": 4156.5,\n  \"normalizedInfluence\": 92.3,\n  \"breakdown\": {\n    \"goalsScore\": 2421,\n    \"assistsScore\": 636,\n    \"appearancesScore\": 1000,\n    \"socialScore\": 2500000\n  }\n}\n```\n\n### Get Leaderboard\n```\nGET /api/players/leaderboard/top?limit=10&league=Premier_League&position=Forward\n```\n\n### Compare Players\n```\nPOST /api/players/compare\n```\nRequest body:\n```json\n{\n  \"playerIds\": [\"1\", \"2\", \"3\"]\n}\n```\n\n## üìà Influence Score Algorithm\n\nThe influence score is calculated using weighted metrics:\n\n```typescript\ninfluence = \n  goals √ó 3 +           // Goals are heavily weighted\n  assists √ó 2 +         // Assists are moderately weighted\n  appearances √ó 1 +     // Match appearances count\n  socialMentions √ó 0.5  // Social media presence\n```\n\n### Normalization\n- Raw scores are normalized to 0-100 scale using logarithmic function\n- Reference max: ~4500 (Messi's approx influence)\n- Clamped to prevent outliers\n\n### Dynamic Weights\nWeights adjust based on:\n- **Position**: Forwards emphasize goals (√ó4), Midfielders emphasize assists (√ó3)\n- **League**: Different leagues have different competitive levels\n- **Custom**: API accepts custom weights in query parameters\n\n## üé® UI Components\n\n### InfluenceCircle\nCircular progress indicator showing 0-100 influence score\n- Color-coded: Red (0-40), Amber (40-60), Blue (60-80), Green (80-100)\n- Animated stroke animation\n- Customizable size (sm, md, lg)\n\n### PlayerCard\nDisplays player info in a compact card layout\n- Player photo/avatar\n- Name, club, position, nationality\n- Match score progress bar\n- Selection indicator\n\n### StatBar\nHorizontal progress bar for stat visualization\n- Label and value display\n- Color-coded bars\n- Customizable colors\n\n## üîß Configuration\n\n### Environment Variables\n\n**Backend (.env)**\n```\nPORT=5000\nNODE_ENV=development\nFOOTBALL_DATA_API_KEY=demo\n```\n\n**Frontend (.env)**\n```\nREACT_APP_API_URL=http://localhost:5000/api\n```\n\n### Caching Configuration\n- Standard TTL: 10 minutes for player data\n- Search TTL: 1 hour\n- Stats TTL: 30 minutes\n- Auto-cleanup every 2 minutes\n\n## üíæ Data Sources\n\nCurrently using **mock data** for demo purposes:\n- Lionel Messi (goals: 807, assists: 318)\n- Cristiano Ronaldo (goals: 890, assists: 270)\n- Erling Haaland (goals: 186, assists: 45)\n- Kylian Mbapp√© (goals: 312, assists: 95)\n- Neymar Jr (goals: 140, assists: 102)\n\n**To integrate real API:**\n1. Get API key from [football-data.org](https://www.football-data.org)\n2. Update `FOOTBALL_DATA_API_KEY` in .env\n3. Implement real API calls in `footballDataApi.ts`\n\n## üß™ Testing\n\n### Search Functionality\n1. Go to Search page\n2. Type player name (e.g., \"Messi\")\n3. Click result or press Enter\n4. View profile with influence score\n\n### Compare Players\n1. Go to Compare page\n2. Search and select 2-5 players\n3. Click \"Compare\"\n4. View charts and stat breakdowns\n\n### Leaderboard\n1. Go to Leaderboard\n2. Adjust filters (league, position, limit)\n3. View ranked players\n4. Click player for profile\n\n## üéØ Advanced Features (Bonus)\n\n‚úÖ **Player Comparison** - Side-by-side influence & stats charts\n‚úÖ **Leaderboard** - Top 10-50 players with dynamic ranking\n‚úÖ **In-Memory Caching** - Efficient API response caching\n‚úÖ **Position-Based Scoring** - Adjusted weights for defenders, midfielders\n‚úÖ **League-Specific Scoring** - Different scales for various leagues\n‚úÖ **Responsive UI** - Mobile-friendly grid/card layouts\n‚úÖ **Radar Charts** - Multi-dimensional stat visualization\n\n## üìù Performance Optimizations\n\n1. **Debounced Search** - 300ms delay to reduce API calls\n2. **Response Caching** - Configurable TTL with auto-cleanup\n3. **Lazy Loading** - Components load on demand\n4. **Memoization** - React hooks prevent unnecessary re-renders\n5. **Code Splitting** - Page components load separately\n\n## üêõ Error Handling\n\n- Graceful API error handling with user-friendly messages\n- Fallback UI for missing data\n- Network error recovery\n- Validation of input data\n\n## üöÄ Deployment\n\n### Backend (Heroku)\n```bash\ncd backend\nnpm run build\ngit push heroku main\n```\n\n### Frontend (Vercel)\n```bash\ncd frontend\nnpm run build\nvercel deploy\n```\n\n## üìö Technologies Used\n\n**Backend:**\n- Node.js 18+\n- Express.js 4\n- TypeScript 5\n- Axios for HTTP requests\n- node-cache for caching\n\n**Frontend:**\n- React 18\n- React Router v6\n- TypeScript 5\n- Tailwind CSS 3\n- Recharts for visualizations\n- Lucide React for icons\n\n## üìÑ License\n\nMIT License - Feel free to use this project for learning and development!\n\n## üë®‚Äçüíª Author\n\nCreated as a full-stack coding assessment project demonstrating:\n- TypeScript best practices\n- React state management\n- RESTful API design\n- Algorithm implementation\n- UI/UX design patterns\n- Production-ready code structure\n\n---\n\n**‚öΩ Enjoy discovering soccer player influence! ‚öΩ**\n",
      "previousContent": null
    },
    {
      "path": ".gitignore",
      "content": "# Dependencies\nnode_modules/\n/.pnp\n.pnp.js\n\n# Testing\n/coverage\n\n# Production\n/build\n/dist\n\n# Misc\n.DS_Store\n.env\n.env.local\n.env.development.local\n.env.test.local\n.env.production.local\n\nnpm-debug.log*\nyarn-debug.log*\nyarn-error.log*\n\n# IDE\n.vscode\n.idea\n*.swp\n*.swo\n*~\n\n# OS\nThumbs.db\n.DS_Store\n",
      "previousContent": null
    },
    {
      "path": "frontend/postcss.config.js",
      "content": "export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n",
      "previousContent": null
    },
    {
      "path": "frontend/.env.example",
      "content": "REACT_APP_API_URL=http://localhost:5000/api\n",
      "previousContent": null
    }
  ]
}